{"ts":1361958247167,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"define(\n\t[\n\t\t'assets/js/components/flight/lib/component', \n\t\t'src/modules/Ingredients/JqueryCalls'\n\t],\n\nfunction(component, jQueryCalls) {\n    function Ingredients() {\n        this.defaultAttrs({\n            selectedItems: [],\n            allItems: [],\n            quantities: [],\n            lastTimeStamp:0\n        });\n        this.setData = function(event)\n\t\t{\n\t\t\tconsole.log(event.returnData);\n\t\t\tthis.attr.lastTimeStamp = event.returnData.lastTimeStamp;\n\t\t\tthis.attr.allItems = this.attr.allItems.concat(event.returnData.updatedData);\t\n\t\t\tif(!(event.returnData.init))\n\t\t\t{\n\t\t\t\tif(event.returnData.addedStatus.success)\n\t\t\t\t{\n\t\t\t\t\t//Launch success alert with code\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t//Launch fail alert with code\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tjQueryCalls.CalculatorsetTypeAhead(this.attr.lastTimeStamp,this.attr.allItems);\n\t\t};\n\t\tthis.addItem = function(event)\n\t\t{\n\t\t\tif (this.attr.selectedItems.indexOf(event.index) == -1) {\n\t\t\t\tvar index = event.index;\n\t\t\t\tvar data = this.attr.allItems[index];\n\t\t\t\tthis.attr.selectedItems.push(event.index);\n\t\t\t\tjQueryCalls.CalculatoraddItem(data,index);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tjQueryCalls.CalculatoraddItemError()\n\t\t\t}\n\t\t};\n\t\tthis.removeItem = function(event)\n\t\t{\n\t\t\tvar index = this.attr.selectedItems.indexOf(event.index);\n            this.attr.selectedItems.splice(index, 1);\n            jQueryCalls.CalculatorremoveItem(event.index);\n\t\t};\n\t\tthis.setQuantities = function(event)\n\t\t{\n\t\t\tvar values = jQueryCalls.CalculatorgetQuantityValues();\n            var sum = 0;\n            for (var i = 0; i < this.attr.selectedItems.length; i++) {\n\n                var index = this.attr.selectedItems[i];\n                var price = this.attr.allItems[index].PRICE;\n                var add = price * values[i];\n                if (!isNaN(add)) sum += add;\n            }\n            console.log(sum);\n\t\t\tjQueryCalls.CalculatorrenderTotalCost(sum);\n\t\t\tif(!event.removed) {\n                jQueryCalls.CalculatorrenderTotalCostChange(event.index,this.attr.allItems[event.index].PRICE);\n            }\n\t\t};\n\t\tthis.Init = function()\n\t\t{\n\t\t\tthis.attr.selectedItems = [];\n\t\t\tthis.attr.allItems = [];\n\t\t\tthis.attr.quantities=[];\n\t\t\tthis.attr.lastTimeStamp = 0;\n\t\t};\n        this.after(\"initialize\", function() {\n\t\t\tthis.Init();\n\t\t\tthis.on(\"nextDependencyLoaded\",jQueryCalls.CalculatorInit);\n\t\t\tthis.on(\"dataReceived\",this.setData);\n\t\t\tthis.on(\"newItemAdded\",this.addItem);\n\t\t\tthis.on(\"itemRemoved\",this.removeItem);\n\t\t\tthis.on(\"quantitiesChanged\", this.setQuantities);\n        });\n    }\n\treturn {calculatorComponent:component(Ingredients)};\n\n});\n"]],"start1":0,"start2":0,"length1":0,"length2":2564}]],"length":2564}
{"contributors":[],"silentsave":false,"ts":1361958261849,"patch":[[{"diffs":[[0,"[],\n"],[-1,"            allItems: [],\n"],[0,"    "]],"start1":223,"start2":223,"length1":34,"length2":8}]],"length":2538,"saved":false}
{"ts":1361958270286,"patch":[[{"diffs":[[0,": []"],[-1,",\n            lastTimeStamp:0"],[0,"\n   "]],"start1":249,"start2":249,"length1":37,"length2":8}]],"length":2509,"saved":false}
{"ts":1361958276670,"patch":[[{"diffs":[[0,"a);\n"],[-1,"\t\t\tthis.attr.lastTimeStamp = event.returnData.lastTimeStamp;\n"],[0,"\t\t\tt"]],"start1":339,"start2":339,"length1":69,"length2":8}]],"length":2448,"saved":false}
{"ts":1361958304945,"patch":[[{"diffs":[[0,"eturnData);\n"],[1,"\t\t\tthis.attr.lastTimeStamp = event.returnData.lastTimeStamp;\n"],[0,"\t\t\tthis.attr"]],"start1":331,"start2":331,"length1":24,"length2":85}]],"length":2509,"saved":false}
{"ts":1361958389383,"patch":[[{"diffs":[[0,"ttr."],[-1,"allItems = [];\n\t\t\tthis.attr.quantities=[];\n\t\t\tthis.attr.lastTimeStamp = 0"],[1,"quantities=[]"],[0,";\n\t\t"]],"start1":2045,"start2":2045,"length1":81,"length2":21}]],"length":2449,"saved":false}
{"ts":1361959505871,"patch":[[{"diffs":[[0,"    "],[-1,"quantities: []"],[1,"allItems: [],\n            quantities: [],\n            lastTimeStamp:0"],[0,"\n   "]],"start1":235,"start2":235,"length1":22,"length2":77},{"diffs":[[0,"ttr."],[-1,"quantities=[]"],[1,"allItems = [];\n\t\t\tthis.attr.quantities=[];\n\t\t\tthis.attr.lastTimeStamp = 0"],[0,";\n\t\t"]],"start1":2100,"start2":2100,"length1":21,"length2":81}]],"length":2564,"saved":false}
