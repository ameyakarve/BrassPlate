{"ts":1361943031082,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"define([\n\t'jquery',\n\t'assets/js/components/bootstrap/js/bootstrap-combined',\n\t'assets/js/typeahead/dist/typeahead',\n\t'mustache',\n\t'underscore'\n\t],function($,Combined,Typeahead,Mustache,_){\n\tvar FormInit = function()\n\t{\n\t\t$(\"#addNewIngredientFormModal\").modal({show:false,keyboard:false});\n\t\t$(\"#addNewIngredientButton\").click(function(){\n\t\t\t$('#addNewIngredientFormModal').modal('show');\n\t\t});\n\t\t$(\"#addIngredientFormSubmit\").click(function(){\n\t\t\t$(\"#formComponent\").trigger({type:\"addFormSubmit\"});\n\t\t\t$(\"#addIngredientFormSubmit\").button(\"loading\");\n\t\t\t$(\"#addIngredientModalClose\").button(\"loading\");\n\t\t\t$(\"#addIngredientFormClear\").button(\"loading\");\n\t\t});\n        $(\"#calculatorComponent\").trigger({type:\"nextDependencyLoaded\"});     \n\t};\n\tvar FormSubmitForm = function()\n\t{\n\t\tvar formData = $(\"#addIngredientmodalForm\").serialize();\n\t\tvar cachebang = new Date().getTime();\n\t\tformData+=\"&CACHEBANG=\"+cachebang;\n\t\t$.ajax({\n\t\t\ttype:\"GET\",\n\t\t\turl:\"api/addIngredient\",\n\t\t\tdata:formData,\n\t\t\tsuccess:function(data){\n\t\t\t\t$(\"#formComponent\").trigger({\n\t\t\t\t  type:\"dataReceived\",\n\t\t\t\t  returnData:data\n\t\t\t\t});\n\t\t\t},\n\t\t\terror:function(data){console.log(\"Error in request\")}\n\t\t});\n\t};\n\tvar FormSetTimeStamp = function(event)\n\t{\n\t\t$(\"#formTimeStamp\").val(event.timestamp);\n\t};\n\t\n\tvar FormReceiveFormData = function(event)\n\t{\n\t\t\n\t\tif(!(event.returnData.init))\n\t\t{\n\t\t\tconsole.log(event);\n\t\t\t$(\"#calculatorComponent\").trigger({\n\t\t\t\ttype:\"dataReceived\",\n\t\t\t\treturnData:event.returnData\n\t\t\t});\n\t\t\t$(\"#addIngredientFormSubmit\").button(\"reset\");\n\t\t\t$(\"#addIngredientModalClose\").button(\"reset\");\n\t\t\t$(\"#addIngredientFormClear\").button(\"reset\");\n\t\t\tif(event.returnData.addedStatus.success)\n\t\t\t{\n\t\t\t\t$(\"#formAlertArea\").html(Mustache.render(Combined.formSuccess));\n\t\t\t\t$(\"#ingredientBoxSuccessAlert\").alert();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$(\"#formAlertArea\").html(Mustache.render(Combined.formError));\n\t\t\t\t$(\"#ingredientBoxErrorAlert\").alert();\n\t\t\t}\n\t\t\t\n\t\t}\n\t\telse\n\t\t{\n\t\t\t\n\t\t}\n\t};\n\tvar CalculatorInit = function()\n\t{\n\t\tvar cachebang = new Date().getTime();\n\t\t$.ajax({\n\t\t\ttype:\"GET\",\n\t\t\turl:\"api/addIngredient\",\n\t\t\tdata:\"LASTTIMESTAMP=0&CACHEBANG=\"+cachebang,\n\t\t\tsuccess:function(data){\n\t\t\t\t$(\"#calculatorComponent\").trigger({\n\t\t\t\t\ttype:\"dataReceived\",\n\t\t\t\t\treturnData:data\n\t\t\t\t});\n\t\t\t},\n\t\t\terror:function(){}\n\t\t});\n\t};\n\tvar CalculatorsetTypeAhead = function(timestamp,data)\n\t{\n\t\t$(\"#formComponent\").trigger({\n\t\t\ttype:\"setTimeStamp\",\n\t\t\ttimestamp:timestamp\n\t\t});\n\t\t$(\"#ingredientTypeahead\").remove();\n        $(\"#inputWarning\").remove();\n        $(\"#inputControls\").html(Mustache.render(Combined.typeAhead,{}));\n\t\tconsole.log(\"Here\");\n\t\tconsole.log(\"Here too\");\n        var names = _.map(data,function(num){return num.NAME;});\n\t\t/*$(\"#ingredientTypeahead\").typeahead({\n\t\t\tsource: names,\n\t\t\tupdater: function(item) {\n\t\t\t\tvar index = this.source.indexOf(item);\n\t\t\t\t$(\"#calculatorComponent\").trigger({\n\t\t\t\t\ttype: \"newItemAdded\",\n\t\t\t\t\titem: item,\n\t\t\t\t\tindex: index\n\t\t\t\t});\n\t\t\t\treturn item;\n\t\t\t},\n\t\t\tmatcher: function(item) {\n\t\t\t\twindow.$(\"#warningGroup\").removeClass(\"error\");\n\t\t\t\twindow.$(\"#inputWarning\").html(\" \");\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});*/\n\t\t$(\"#ingredientTypeahead\").typeahead({local:names});\n\t\tconsole.log(names);\n\t};\n\tvar CalculatoraddItem = function(data,index)\n\t{\n\t\tconsole.log(data);\n\t\tvar id = \"addedItem\" + index;\n\t\t$(\"#itemList\").append(Mustache.render(Combined.addItem,{data:data,index:index}));\t\t\n\t\t$(\"#removeItem\" + index).click(function() {\n\t\t\t$(\"#calculatorComponent\").trigger({\n\t\t\t\ttype: \"itemRemoved\",\n\t\t\t\tindex: index\n\t\t\t});\n\t\t});\n\t\t$(\"#itemQuantity\" + index).on(\"input\", function() {\n\t\t\t$(\"#calculatorComponent\").trigger({\n\t\t\t\ttype: \"quantitiesChanged\",\n\t\t\t\tindex: index,\n\t\t\t\tremoved: false\n\t\t\t});\n\t\t});\n\t\t\n\t};\n\tvar CalculatoraddItemError = function()\n\t{\n\t\t$(\"#warningGroup\").addClass(\"error\");\n\t\t$(\"#inputWarning\").html(\"This item is already present\");\n\t};\n\tvar CalculatorremoveItem = function(index)\n\t{\n\t\t$(\"#addedItem\" + index).remove();\n\t\t$(\"#calculatorComponent\").trigger({\n                type: \"quantitiesChanged\",\n                index: index,\n                removed: true\n            });\n\t};\n\tvar CalculatorgetQuantityValues = function()\n\t{\n\t\tvar dom = $(\".inputQuantity\");\n\t\treturn (_.map(dom, function(item) {\n\t\t\tif (isNaN(parseFloat(item.value))) return 0;\n\t\t\telse if (parseFloat(item.value) < 0) return 0;\n\t\t\telse return parseFloat(item.value);\n\t\t}));\n\t\t\t\n\t};\n\tvar CalculatorrenderTotalCost = function(cost)\n\t{\n\t\tconsole.log(cost);\n\t\t$(\"#totalPriceValue\").html(cost.toFixed(2));\n\t};\n\tvar CalculatorrenderTotalCostChange = function(index,price)\n\t{\n\t\tvar thisVal = parseFloat($(\"#itemQuantity\" + index)[0].value);\n\t\tif (thisVal < 0 || isNaN(thisVal)) thisVal = 0;\n\t\tvar cost = thisVal * price;\n\t\t$(\"#itemValue\" + index).html(cost.toFixed(2));\n\t};\n\t\n\treturn{\n\t\tFormInit:FormInit,\n\t\tFormSubmitForm:FormSubmitForm,\n\t\tFormReceiveFormData:FormReceiveFormData,\n\t\tFormSetTimeStamp:FormSetTimeStamp,\n\t\tCalculatorInit:CalculatorInit, \n\t\tCalculatorsetTypeAhead:CalculatorsetTypeAhead,\n\t\tCalculatoraddItem:CalculatoraddItem,\n\t\tCalculatoraddItemError:CalculatoraddItemError,\n\t\tCalculatorremoveItem:CalculatorremoveItem,\n\t\tCalculatorgetQuantityValues:CalculatorgetQuantityValues,\n\t\tCalculatorrenderTotalCost:CalculatorrenderTotalCost,\n\t\tCalculatorrenderTotalCostChange:CalculatorrenderTotalCostChange\n\t\t};\n});"]],"start1":0,"start2":0,"length1":0,"length2":5306}]],"length":5306}
{"contributors":[],"silentsave":false,"ts":1361943144389,"patch":[[{"diffs":[[0,"um){"],[-1,"return num.NAME;"],[1,"\n            return {\n                value:num.NAME,\n                tags:[],\n                callback:function(a){console.log}\n            };\n        "],[0,"});\n"]],"start1":2679,"start2":2679,"length1":24,"length2":160}]],"length":5442,"saved":false}
{"ts":1361943151642,"patch":[[{"diffs":[[0,"sole.log"],[1,"(a);"],[0,"}\n      "]],"start1":2802,"start2":2802,"length1":16,"length2":20}]],"length":5446,"saved":false}
{"ts":1361943162906,"patch":[[{"diffs":[[0,"  tags:["],[1,"num.NAME"],[0,"],\n     "]],"start1":2751,"start2":2751,"length1":16,"length2":24}]],"length":5454,"saved":false}
{"ts":1361943202690,"patch":[[{"diffs":[[0,"   t"],[-1,"ag"],[1,"oken"],[0,"s:[n"]],"start1":2750,"start2":2750,"length1":10,"length2":12}]],"length":5456,"saved":false}
{"ts":1361943602089,"patch":[[{"diffs":[[0,"ack:"],[-1,"function(a){console.log(a);}"],[1,"\"Test\""],[0,"\n   "]],"start1":2793,"start2":2793,"length1":36,"length2":14}]],"length":5434,"saved":false}
{"ts":1361944298415,"patch":[[{"diffs":[[0,"erscore'"],[1,",\n    'assets/js/hogan/wrappers/amd.js.mustache'"],[0,"\n\t],func"]],"start1":134,"start2":134,"length1":16,"length2":64}]],"length":5482,"saved":false}
{"ts":1361944302187,"patch":[[{"diffs":[[0,"stache,_"],[1,",Hogan"],[0,"){\n\tvar "]],"start1":226,"start2":226,"length1":16,"length2":22}]],"length":5488,"saved":false}
{"ts":1361944341870,"patch":[[{"diffs":[[0,"ead("],[-1,"{local:names"],[1,"\n            {\n                local:names,\n                template:\" \",\n                engine:Hogan\n            "],[0,"});\n"]],"start1":3336,"start2":3336,"length1":20,"length2":123}]],"length":5591,"saved":false}
{"ts":1361944556268,"patch":[[{"diffs":[[0,"emplate:"],[-1,"\" \""],[1,"'<ol class=\"tt-dropdown-menu\"> {{#dataset}} <li class=\"tt-dataset-{{name}}\"> <ol class=\"tt-suggestions\"> {{#suggestions}} <li class=\"tt-suggestion\">{{{html}}}<li> {{/suggestions}} </ol> {{/dataset}} </ol> '"],[0,",\n      "]],"start1":3401,"start2":3401,"length1":19,"length2":222}]],"length":5794,"saved":false}
{"ts":1361944964940,"patch":[[{"diffs":[[0,"\t\t});*/\n"],[1,"        \n"],[0,"\t\t$(\"#in"]],"start1":3294,"start2":3294,"length1":16,"length2":25},{"diffs":[[0,":names,\n"],[1,""],[0,"        "]],"start1":3385,"start2":3385,"length1":16,"length2":16},{"diffs":[[0,"    "],[-1,"template:'<ol class=\"tt-dropdown-menu\"> {{#dataset}} <li class=\"tt-dataset-{{name}}\"> <ol class=\"tt-suggestions\"> {{#suggestions}} <li class=\"tt-suggestion\">{{{html}}}<li> {{/suggestions}} </ol> {{/dataset}} </ol> ',\n                engine:Hogan"],[0,"\n   "]],"start1":3405,"start2":3405,"length1":253,"length2":8}]],"length":5558,"saved":false}
{"ts":1361944973954,"patch":[[{"diffs":[[0,"        "],[1,"console.log(Mustache);"],[0,"\n\t\t$(\"#i"]],"start1":3302,"start2":3302,"length1":16,"length2":38}]],"length":5580,"saved":false}
{"ts":1361945025391,"patch":[[{"diffs":[[0,"    "],[-1,"'assets/js/hogan/wrappers/amd.js.mustache'\n\t"],[0,"],fu"]],"start1":144,"start2":144,"length1":52,"length2":8},{"diffs":[[0,"he,_"],[-1,",Hogan"],[0,"){\n\t"]],"start1":186,"start2":186,"length1":14,"length2":8}]],"length":5530,"saved":false}
{"ts":1361945126354,"patch":[[{"diffs":[[0,"tache);\n"],[1,"        var engine = {compile:function(dataset){console.log(dataset);}};\n"],[0,"\t\t$(\"#in"]],"start1":3275,"start2":3275,"length1":16,"length2":89}]],"length":5603,"saved":false}
{"ts":1361945132085,"patch":[[{"diffs":[[0,"        "],[1,"engine:engine"],[0,"\n       "]],"start1":3446,"start2":3446,"length1":16,"length2":29}]],"length":5616,"saved":false}
{"ts":1361945230488,"patch":[[{"diffs":[[0,"e:engine"],[1,",\n                template:\"Some random text\""],[0,"\n       "]],"start1":3459,"start2":3459,"length1":16,"length2":61}]],"length":5661,"saved":false}
{"ts":1361945293617,"patch":[[{"diffs":[[0,"ion("],[-1,"dataset){console.log(dataset);"],[1,"template){\n            \n        "],[0,"}};\n"]],"start1":3318,"start2":3318,"length1":38,"length2":40}]],"length":5663,"saved":false}
{"ts":1361945319401,"patch":[[{"diffs":[[0,"        "],[1,"return function(item){console.log(item);};"],[0,"\n       "]],"start1":3337,"start2":3337,"length1":16,"length2":58}]],"length":5705,"saved":false}
{"ts":1361945380824,"patch":[[{"diffs":[[0," return "],[1,"{render:"],[0,"function"]],"start1":3344,"start2":3344,"length1":16,"length2":24},{"diffs":[[0,"(item);}"],[1,"}"],[0,";\n      "]],"start1":3386,"start2":3386,"length1":16,"length2":17}]],"length":5714,"saved":false}
{"ts":1361945463983,"patch":[[{"diffs":[[0,"g(item);"],[1,"return \"Ameya\";"],[0,"}};\n    "]],"start1":3385,"start2":3385,"length1":16,"length2":31}]],"length":5729,"saved":false}
{"ts":1361945727618,"patch":[[{"diffs":[[0,"tache);\n"],[1,"        var engineRender = function(context){\n            console.log(context);\n            return \"Ameya\";\n        };\n"],[0,"        "]],"start1":3275,"start2":3275,"length1":16,"length2":135},{"diffs":[[0,"n(item){"],[1,"\n                "],[0,"console."]],"start1":3486,"start2":3486,"length1":16,"length2":33},{"diffs":[[0,"\"Ameya\";"],[1,"\n            "],[0,"}};\n    "]],"start1":3536,"start2":3536,"length1":16,"length2":29}]],"length":5878,"saved":false}
{"ts":1361945791408,"patch":[[{"diffs":[[0,"tache);\n"],[1,"        var engineCompile = function(template)\n        {\n    "],[0,"        "]],"start1":3275,"start2":3275,"length1":16,"length2":77},{"diffs":[[0,"t){\n            "],[1,"  "],[1,"  "],[0,"console.log(cont"]],"start1":3386,"start2":3386,"length1":32,"length2":36},{"diffs":[[0,"            "],[1,"    "],[0,"return \"Amey"]],"start1":3428,"start2":3428,"length1":24,"length2":28},{"diffs":[[0,"return \"Ameya\";\n"],[1,"            };\n"],[0,"        };\n     "]],"start1":3444,"start2":3444,"length1":32,"length2":47}]],"length":5962,"saved":false}
{"ts":1361945865839,"patch":[[{"diffs":[[0,"\n            };\n"],[1,"            return {render:engineRender};\n"],[0,"        };\n     "]],"start1":3459,"start2":3459,"length1":32,"length2":74}]],"length":6004,"saved":false}
{"ts":1361945886564,"patch":[[{"diffs":[[0,"ile:"],[-1,"function(template){\n            return {render:function(item){\n                console.log(item);return \"Ameya\";\n            }};\n        }"],[1,"en"],[0,"};\n\t"]],"start1":3554,"start2":3554,"length1":146,"length2":10}]],"length":5868,"saved":false}
{"ts":1361945892098,"patch":[[{"diffs":[[0,"mpile:en"],[1,"gineCompile"],[0,"};\n\t\t$(\""]],"start1":3552,"start2":3552,"length1":16,"length2":27}]],"length":5879,"saved":false}
{"ts":1361946037034,"patch":[[{"diffs":[[0,"rn \""],[1,"<p>"],[0,"Ameya"],[1,"</p>"],[0,"\";\n "]],"start1":3448,"start2":3448,"length1":13,"length2":20}]],"length":5886,"saved":false}
{"ts":1361946290443,"patch":[[{"diffs":[[0," return "],[-1,"\""],[1,"'<li class=\"tt-suggestion\">"],[0,"<p>Ameya"]],"start1":3443,"start2":3443,"length1":17,"length2":43},{"diffs":[[0,"meya</p>"],[-1,"\""],[1,"</li>'"],[0,";\n      "]],"start1":3482,"start2":3482,"length1":17,"length2":22}]],"length":5917,"saved":false}
{"ts":1361946490786,"patch":[[{"diffs":[[0,";*/\n"],[-1,"        console.log(Mustache);\n"],[0,"    "]],"start1":3248,"start2":3248,"length1":39,"length2":8}]],"length":5886,"saved":false}
{"ts":1361946519023,"patch":[[{"diffs":[[0,";\n\t\t"],[-1,"console.log(\"Here\");\n\t\tconsole.log(\"Here too\");\n        "],[0,"var "]],"start1":2590,"start2":2590,"length1":64,"length2":8}]],"length":5830,"saved":false}
{"ts":1361946531032,"patch":[[{"diffs":[[0,"});\n"],[-1,"\t\tconsole.log(names);\n"],[0,"\t};\n"]],"start1":3694,"start2":3694,"length1":30,"length2":8}]],"length":5808,"saved":false}
{"ts":1361948801991,"patch":[[{"diffs":[[0,"ames"],[-1,",\n                engine:engine,\n                template:\"Some random text\""],[0,"\n   "]],"start1":3601,"start2":3601,"length1":84,"length2":8}]],"length":5732,"saved":false}
{"ts":1361948808205,"patch":[[{"diffs":[[0,";*/\n"],[-1,"        var engineCompile = function(template)\n        {\n            var engineRender = function(context){\n                console.log(context);\n                return '<li class=\"tt-suggestion\"><p>Ameya</p></li>';\n            };\n            return {render:engineRender};\n        };\n        var engine = {compile:engineCompile};\n"],[0,"\t\t$("]],"start1":3192,"start2":3192,"length1":337,"length2":8}]],"length":5403,"saved":false}
{"ts":1361959886143,"patch":[[{"diffs":[[0,"    "],[-1,"local"],[1,"prefetch"],[0,":nam"]],"start1":3261,"start2":3261,"length1":13,"length2":16}]],"length":5406,"saved":false}
{"ts":1361959889820,"patch":[[{"diffs":[[0,"refetch:"],[-1,"names"],[1,"\"\""],[0,"\n       "]],"start1":3266,"start2":3266,"length1":21,"length2":18}]],"length":5403,"saved":false}
{"ts":1361959951503,"patch":[[{"diffs":[[0,"efetch:\""],[1,"api/typeaheadHackInit"],[0,"\"\n      "]],"start1":3267,"start2":3267,"length1":16,"length2":37}]],"length":5424,"saved":false}
