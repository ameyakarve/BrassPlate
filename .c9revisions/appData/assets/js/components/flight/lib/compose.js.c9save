{"ts":1361965245476,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"// ==========================================\n// Copyright 2013 Twitter, Inc\n// Licensed under The MIT License\n// http://opensource.org/licenses/MIT\n// ==========================================\n\n\"use strict\";\n\ndefine(\n\n  [\n    './utils',\n    '../tools/debug/debug'\n  ],\n\n  function(util, debug) {\n\n    //enumerables are shims - getOwnPropertyDescriptor shim doesn't work\n    var canWriteProtect = debug.enabled && !util.isEnumerable(Object, 'getOwnPropertyDescriptor');\n    //whitelist of unlockable property names\n    var dontLock = ['mixedIn'];\n\n    if (canWriteProtect) {\n      //IE8 getOwnPropertyDescriptor is built-in but throws exeption on non DOM objects\n      try {\n        Object.getOwnPropertyDescriptor(Object, 'keys');\n      } catch(e) {\n        canWriteProtect = false;\n      }\n    }\n\n    function setPropertyWritability(obj, isWritable) {\n      if (!canWriteProtect) {\n        return;\n      }\n\n      var props = Object.create(null);\n\n      Object.keys(obj).forEach(\n        function (key) {\n          if (dontLock.indexOf(key) < 0) {\n            var desc = Object.getOwnPropertyDescriptor(obj, key);\n            desc.writable = isWritable;\n            props[key] = desc;\n          }\n        }\n      );\n\n      Object.defineProperties(obj, props);\n    }\n\n    function unlockProperty(obj, prop, op) {\n      var writable;\n\n      if (!canWriteProtect || !obj.hasOwnProperty(prop)) {\n        op.call(obj);\n        return;\n      }\n\n      writable = Object.getOwnPropertyDescriptor(obj, prop).writable;\n      Object.defineProperty(obj, prop, { writable: true });\n      op.call(obj);\n      Object.defineProperty(obj, prop, { writable: writable });\n    }\n\n    function mixin(base, mixins) {\n      base.mixedIn = base.hasOwnProperty('mixedIn') ? base.mixedIn : [];\n\n      mixins.forEach(function(mixin) {\n        if (base.mixedIn.indexOf(mixin) == -1) {\n          setPropertyWritability(base, false);\n          mixin.call(base);\n          base.mixedIn.push(mixin);\n        }\n      });\n\n      setPropertyWritability(base, true);\n    }\n\n    return {\n      mixin: mixin,\n      unlockProperty: unlockProperty\n    };\n\n  }\n);\n"]],"start1":0,"start2":0,"length1":0,"length2":2125}]],"length":2125}
