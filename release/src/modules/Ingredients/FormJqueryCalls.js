define(["jquery","assets/js/components/bootstrap/js/bootstrap-modal","assets/js/components/bootstrap/js/bootstrap-button","assets/js/components/bootstrap/js/bootstrap-alert","mustache","text!src/modules/Ingredients/templates/formError.txt","text!src/modules/Ingredients/templates/formSuccess.txt"],function(t,e,n,i,r,o,s){var a=function(){t("#addNewIngredientFormModal").modal({show:!1,keyboard:!1}),t("#addNewIngredientButton").click(function(){t("#addNewIngredientFormModal").modal("show")}),t("#addIngredientFormSubmit").click(function(){t("#formComponent").trigger({type:"addFormSubmit"}),t("#addIngredientFormSubmit").button("loading"),t("#addIngredientModalClose").button("loading"),t("#addIngredientFormClear").button("loading")}),t("#calculatorComponent").trigger({type:"nextDependencyLoaded"})},u=function(){var e=t("#addIngredientmodalForm").serialize(),n=(new Date).getTime();e+="&CACHEBANG="+n,t.ajax({type:"GET",url:"api/addIngredient",data:e,success:function(e){t("#formComponent").trigger({type:"dataReceived",returnData:e})},error:function(){console.log("Error in request")}})},c=function(e){t("#formTimeStamp").val(e.timestamp)},l=function(e){e.returnData.init||(console.log(e),t("#calculatorComponent").trigger({type:"dataReceived",returnData:e.returnData}),t("#addIngredientFormSubmit").button("reset"),t("#addIngredientModalClose").button("reset"),t("#addIngredientFormClear").button("reset"),e.returnData.addedStatus.success?(t("#formAlertArea").html(r.render(s)),t("#ingredientBoxSuccessAlert").alert()):(t("#formAlertArea").html(r.render(o)),t("#ingredientBoxErrorAlert").alert()))};return{Init:a,SubmitForm:u,ReceiveFormData:l,SetTimeStamp:c}});