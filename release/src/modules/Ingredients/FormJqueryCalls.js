define(["jquery","assets/js/components/bootstrap/js/bootstrap-modal","assets/js/components/bootstrap/js/bootstrap-button","assets/js/components/bootstrap/js/bootstrap-alert","mustache","text!src/modules/Ingredients/templates/formError.txt","text!src/modules/Ingredients/templates/formSuccess.txt"],function(e,t,n,r,i,o,a){var s=function(){e("#addNewIngredientFormModal").modal({show:!1,keyboard:!1}),e("#addNewIngredientButton").click(function(){e("#addNewIngredientFormModal").modal("show")}),e("#addIngredientFormSubmit").click(function(){e("#formComponent").trigger({type:"addFormSubmit"}),e("#addIngredientFormSubmit").button("loading"),e("#addIngredientModalClose").button("loading"),e("#addIngredientFormClear").button("loading")}),e("#calculatorComponent").trigger({type:"nextDependencyLoaded"})},u=function(){var t=e("#addIngredientmodalForm").serialize(),n=(new Date).getTime();t+="&CACHEBANG="+n,e.ajax({type:"GET",url:"api/addIngredient",data:t,success:function(t){e("#formComponent").trigger({type:"dataReceived",returnData:t})},error:function(){console.log("Error in request")}})},c=function(t){e("#formTimeStamp").val(t.timestamp)},l=function(t){t.returnData.init||(console.log(t),e("#calculatorComponent").trigger({type:"dataReceived",returnData:t.returnData}),e("#addIngredientFormSubmit").button("reset"),e("#addIngredientModalClose").button("reset"),e("#addIngredientFormClear").button("reset"),t.returnData.addedStatus.success?(e("#formAlertArea").html(i.render(a)),e("#ingredientBoxSuccessAlert").alert()):(e("#formAlertArea").html(i.render(o)),e("#ingredientBoxErrorAlert").alert()))};return{Init:s,SubmitForm:u,ReceiveFormData:l,SetTimeStamp:c}});