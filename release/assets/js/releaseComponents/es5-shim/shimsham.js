// Copyright 2009-2012 by contributors, MIT License
// vim: ts=4 sts=4 sw=4 expandtab

(function(e,t){"function"==typeof define?define(e,t):"function"==typeof YUI?YUI.add("es5",e,t):(e(),t())})(function(){Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError("Function.prototype.bind called on incompatible "+t);var n=u.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var o=new i,s=t.apply(o,n.concat(u.call(arguments)));return Object(s)===s?s:o}return t.apply(e,n.concat(u.call(arguments)))};return r});var e,t,n,r,i,o=Function.prototype.call,s=Array.prototype,a=Object.prototype,u=s.slice,l=o.bind(a.toString),c=o.bind(a.hasOwnProperty);if((i=c(a,"__defineGetter__"))&&(e=o.bind(a.__defineGetter__),t=o.bind(a.__defineSetter__),n=o.bind(a.__lookupGetter__),r=o.bind(a.__lookupSetter__)),Array.isArray||(Array.isArray=function(e){return"[object Array]"==l(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=w(this),n=arguments[1],r=-1,i=t.length>>>0;if("[object Function]"!=l(e))throw new TypeError;for(;i>++r;)r in t&&e.call(n,t[r],r,t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=w(this),n=t.length>>>0,r=Array(n),i=arguments[1];if("[object Function]"!=l(e))throw new TypeError(e+" is not a function");for(var o=0;n>o;o++)o in t&&(r[o]=e.call(i,t[o],o,t));return r}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,n=w(this),r=n.length>>>0,i=[],o=arguments[1];if("[object Function]"!=l(e))throw new TypeError(e+" is not a function");for(var s=0;r>s;s++)s in n&&(t=n[s],e.call(o,t,s,n)&&i.push(t));return i}),Array.prototype.every||(Array.prototype.every=function(e){var t=w(this),n=t.length>>>0,r=arguments[1];if("[object Function]"!=l(e))throw new TypeError(e+" is not a function");for(var i=0;n>i;i++)if(i in t&&!e.call(r,t[i],i,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=w(this),n=t.length>>>0,r=arguments[1];if("[object Function]"!=l(e))throw new TypeError(e+" is not a function");for(var i=0;n>i;i++)if(i in t&&e.call(r,t[i],i,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=w(this),n=t.length>>>0;if("[object Function]"!=l(e))throw new TypeError(e+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var r,i=0;if(arguments.length>=2)r=arguments[1];else for(;;){if(i in t){r=t[i++];break}if(++i>=n)throw new TypeError("reduce of empty array with no initial value")}for(;n>i;i++)i in t&&(r=e.call(void 0,r,t[i],i,t));return r}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=w(this),n=t.length>>>0;if("[object Function]"!=l(e))throw new TypeError(e+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var r,i=n-1;if(arguments.length>=2)r=arguments[1];else for(;;){if(i in t){r=t[i--];break}if(0>--i)throw new TypeError("reduceRight of empty array with no initial value")}do i in this&&(r=e.call(void 0,r,t[i],i,t));while(i--);return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=w(this),n=t.length>>>0;if(!n)return-1;var r=0;for(arguments.length>1&&(r=y(arguments[1])),r=r>=0?r:Math.max(0,n+r);n>r;r++)if(r in t&&t[r]===e)return r;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){var t=w(this),n=t.length>>>0;if(!n)return-1;var r=n-1;for(arguments.length>1&&(r=Math.min(r,y(arguments[1]))),r=r>=0?r:n-Math.abs(r);r>=0;r--)if(r in t&&e===t[r])return r;return-1}),!Object.keys){var f=!0,p=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=p.length;for(var h in{toString:null})f=!1;Object.keys=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var t=[];for(var n in e)c(e,n)&&t.push(n);if(f)for(var r=0,i=d;i>r;r++){var o=p[r];c(e,o)&&t.push(o)}return t}}Date.prototype.toISOString&&-1!==new Date(-621987552e5).toISOString().indexOf("-000001")||(Date.prototype.toISOString=function(){var e,t,n,r;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(e=[this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],r=this.getUTCFullYear(),r=(0>r?"-":r>9999?"+":"")+("00000"+Math.abs(r)).slice(r>=0&&9999>=r?-4:-6),t=e.length;t--;)n=e[t],10>n&&(e[t]="0"+n);return r+"-"+e.slice(0,2).join("-")+"T"+e.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}),Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(){if("function"!=typeof this.toISOString)throw new TypeError("toISOString property is not callable");return this.toISOString()}),Date.parse&&864e13===Date.parse("+275760-09-13T00:00:00.000Z")||(Date=function(e){var t=function t(n,r,i,o,s,a,u){var l=arguments.length;if(this instanceof e){var c=1==l&&n+""===n?new e(t.parse(n)):l>=7?new e(n,r,i,o,s,a,u):l>=6?new e(n,r,i,o,s,a):l>=5?new e(n,r,i,o,s):l>=4?new e(n,r,i,o):l>=3?new e(n,r,i):l>=2?new e(n,r):l>=1?new e(n):new e;return c.constructor=t,c}return e.apply(this,arguments)},n=RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");for(var r in e)t[r]=e[r];return t.now=e.now,t.UTC=e.UTC,t.prototype=e.prototype,t.prototype.constructor=t,t.parse=function(t){var r=n.exec(t);if(r){r.shift();for(var i=1;7>i;i++)r[i]=+(r[i]||(3>i?1:0)),1==i&&r[i]--;var o=+r.pop(),s=+r.pop(),a=r.pop(),u=0;if(a){if(s>23||o>59)return 0/0;u=6e4*(60*s+o)*("+"==a?-1:1)}var l=+r[0];return l>=0&&99>=l?(r[0]=l+400,e.UTC.apply(this,r)+u-126227808e5):e.UTC.apply(this,r)+u}return e.parse.apply(this,arguments)},t}(Date));var m="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||m.trim()){m="["+m+"]";var g=RegExp("^"+m+m+"*"),v=RegExp(m+m+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return(this+"").replace(g,"").replace(v,"")}}var y=function(e){return e=+e,e!==e?e=0:0!==e&&e!==1/0&&e!==-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e},b="a"!="a"[0],w=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return b&&"string"==typeof e&&e?e.split(""):Object(e)}},function(){function e(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}if(Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__||(e.constructor?e.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var t="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(e,n){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError(t+e);if(owns(e,n)){var r={enumerable:!0,configurable:!0};if(supportsAccessors){var i=e.__proto__;e.__proto__=prototypeOfObject;var o=lookupGetter(e,n),s=lookupSetter(e,n);if(e.__proto__=i,o||s)return o&&(r.get=o),s&&(r.set=s),r}return r.value=e[n],r}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),Object.create||(Object.create=function(e,t){var n;if(null===e)n={__proto__:null};else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var r=function(){};r.prototype=e,n=new r,n.__proto__=e}return void 0!==t&&Object.defineProperties(n,t),n}),Object.defineProperty){var n=e({}),r="undefined"==typeof document||e(document.createElement("div"));if(!n||!r)var i=Object.defineProperty}if(!Object.defineProperty||i){var o="Property description must be an object: ",s="Object.defineProperty called on non-object: ",a="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(e,t,n){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError(s+e);if("object"!=typeof n&&"function"!=typeof n||null===n)throw new TypeError(o+n);if(i)try{return i.call(Object,e,t,n)}catch(r){}if(owns(n,"value"))if(supportsAccessors&&(lookupGetter(e,t)||lookupSetter(e,t))){var u=e.__proto__;e.__proto__=prototypeOfObject,delete e[t],e[t]=n.value,e.__proto__=u}else e[t]=n.value;else{if(!supportsAccessors)throw new TypeError(a);owns(n,"get")&&defineGetter(e,t,n.get),owns(n,"set")&&defineSetter(e,t,n.set)}return e}}Object.defineProperties||(Object.defineProperties=function(e,t){for(var n in t)owns(t,n)&&"__proto__"!=n&&Object.defineProperty(e,n,t[n]);return e}),Object.seal||(Object.seal=function(e){return e}),Object.freeze||(Object.freeze=function(e){return e});try{Object.freeze(function(){})}catch(u){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(e){return e}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)!==e)throw new TypeError;for(var t="";owns(e,t);)t+="?";e[t]=!0;var n=owns(e,t);return delete e[t],n})});