function rimraf(e,t){if(!t)throw Error("No callback passed to rimraf()");var n=0;rimraf_(e,function r(i){if(i){if("EBUSY"===i.code&&exports.BUSYTRIES_MAX>n){n++;var o=100*n;return setTimeout(function(){rimraf_(e,r)},o)}if("EMFILE"===i.code&&exports.EMFILE_MAX>timeout)return setTimeout(function(){rimraf_(e,r)},timeout++);"ENOENT"===i.code&&(i=null)}timeout=0,t(i)})}function rimraf_(e,t){fs[lstat](e,function(n,r){return n?"ENOENT"===n.code?t():t(n):rm_(e,r,!1,t)})}function writable(e){var t=e.mode||511,n=myUid(),r=myGid();return 2&t||r===e.gid&&16&t||n===e.uid&&128&t}function rm_(e,t,n,r){return n||writable(t)?t.isDirectory()?(fs.readdir(e,function(t,n){return t?r(t):(asyncForEach(n.map(function(t){return path.join(e,t)}),function(e,t){rimraf(e,t)},function(t){return t?r(t):(fs.rmdir(e,r),void 0)}),void 0)}),void 0):fs.unlink(e,r):fs.chmod(e,146|t.mode,function(n){return n?r(n):(rm_(e,t,!0,r),void 0)})}function asyncForEach(e,t,n){e.length||n();var r=e.length,i=null;e.forEach(function(e){t(e,function(e){return i?void 0:e?n(i=e):0===--r?n():void 0})})}function rimrafSync(e){try{var t=fs[lstatSync](e)}catch(n){if("ENOENT"===n.code)return;throw n}return writable(t)||fs.chmodSync(e,146|t.mode),t.isDirectory()?(fs.readdirSync(e).forEach(function(t){rimrafSync(path.join(e,t))}),fs.rmdirSync(e),void 0):fs.unlinkSync(e)}module.exports=rimraf,rimraf.sync=rimrafSync;var path=require("path"),fs;try{fs=require("../../graceful-fs/graceful-fs.js")}catch(er){fs=require("fs")}var lstat="lstat";if("win32"===process.platform){var v=process.version.replace(/^v/,"").split(/\.|-/).map(Number);0===v[0]&&(7>v[1]||7==v[1]&&9>v[2])&&(lstat="stat")}fs[lstat]||(lstat="stat");var lstatSync=lstat+"Sync",timeout=0;exports.EMFILE_MAX=1e3,exports.BUSYTRIES_MAX=3;var myGid=function myGid(){var e=process.getuid&&process.getgid();return t=function t(){return e},e},myUid=function myUid(){var e=process.getuid&&process.getuid();return t=function t(){return e},e};