(function(){var e,t,n,r,i,o,a,s;exports.OptionParser=r=function(){function t(e,t){this.banner=t,this.rules=a(e)}return t.prototype.parse=function(t){var n,r,o,a,u,l,c,f,p,d,h,m,g,v,y,b;for(u={arguments:[]},d=!1,l=t,t=s(t),r=m=0,v=t.length;v>m;r=++m)if(n=t[r],d)d=!1;else{if("--"===n){c=l.indexOf("--"),u.arguments=u.arguments.concat(l.slice(c+1));break}if(o=!(!n.match(e)&&!n.match(i)),p=u.arguments.length>0,!p){for(a=!1,b=this.rules,g=0,y=b.length;y>g;g++)if(f=b[g],f.shortFlag===n||f.longFlag===n){h=!0,f.hasArgument&&(d=!0,h=t[r+1]),u[f.name]=f.isList?(u[f.name]||[]).concat(h):h,a=!0;break}if(o&&!a)throw Error("unrecognized option: "+n)}(p||!o)&&u.arguments.push(n)}return u},t.prototype.help=function(){var e,t,n,r,i,o,a;for(t=[],this.banner&&t.unshift(""+this.banner+"\n"),a=this.rules,i=0,o=a.length;o>i;i++)n=a[i],r=15-n.longFlag.length,r=r>0?Array(r+1).join(" "):"",e=n.shortFlag?n.shortFlag+", ":"    ",t.push("  "+e+n.longFlag+r+n.description);return"\n"+t.join("\n")+"\n"},t}(),e=/^(--\w[\w\-]*)/,i=/^(-\w)$/,t=/^-(\w{2,})/,n=/\[(\w+(\*?))\]/,a=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;r>n;n++)t=e[n],3>t.length&&t.unshift(null),i.push(o.apply(null,t));return i},o=function(t,r,i,o){var a;return null==o&&(o={}),a=r.match(n),r=r.match(e)[1],{name:r.substr(2),shortFlag:t,longFlag:r,description:i,hasArgument:!(!a||!a[1]),isList:!(!a||!a[2])}},s=function(e){var n,r,i,o,a,s,u,l,c;for(e=e.slice(0),o=[],a=0,u=e.length;u>a;a++)if(n=e[a],i=n.match(t))for(c=i[1].split(""),s=0,l=c.length;l>s;s++)r=c[s],o.push("-"+r);else o.push(n);return o}}).call(this);