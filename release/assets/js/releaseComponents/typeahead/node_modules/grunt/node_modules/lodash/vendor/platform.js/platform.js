/*!
 * Platform.js v1.0.0 <http://mths.be/platform>
 * Copyright 2010-2012 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <http://mths.be/mit>
 */

(function(e){function t(e){return e+="",e.charAt(0).toUpperCase()+e.slice(1)}function n(e,t){var n=-1,r=e.length;if(r==r>>>0)for(;r>++n;)t(e[n],n,e);else i(e,t)}function r(e){return e=c(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:t(e)}function i(e,t){for(var n in e)a(e,n)&&t(e[n],n,e)}function o(e){return null==e?t(e):g.call(e).slice(8,-1)}function a(){return a=function(e,t){var n=null!=e&&(e.constructor||Object).prototype;return!!n&&t in Object(e)&&!(t in n&&e[t]===n[t])},"Function"==o(w)?a=function(e,t){return null!=e&&w.call(e,t)}:{}.__proto__==Object.prototype&&(a=function(e,t){var n=!1;return null!=e&&(e=Object(e),e.__proto__=[e.__proto__,e.__proto__=null,n=t in e][0]),n}),a.apply(this,arguments)}function s(e,t){var n=null!=e?typeof e[t]:"number";return!/^(?:boolean|number|string|undefined)$/.test(n)&&("object"==n?!!e[t]:!0)}function u(e){return(e+"").replace(/([ -])(?!$)/g,"$1?")}function l(e,t){var r=null;return n(e,function(n,i){r=t(r,n,i,e)}),r}function c(e){return(e+"").replace(/^ +| +$/g,"")}function f(t){function n(e){return l(e,function(e,n){return e||RegExp("\\b"+(n.pattern||u(n))+"\\b","i").exec(t)&&(n.label||n)})}function a(e){return l(e,function(e,n,r){return e||(n[$]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec($)]||RegExp("\\b"+(r.pattern||u(r))+"(?:\\b|\\w*\\d)","i").exec(t))&&(r.label||r)})}function p(e){return l(e,function(e,n){return e||RegExp("\\b"+(n.pattern||u(n))+"\\b","i").exec(t)&&(n.label||n)})}function w(e){return l(e,function(e,n){var i=n.pattern||u(n);return!e&&(e=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(C={6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},/^Win/i.test(e)&&(C=C[/[\d.]+$/.exec(e)])&&(e="Windows "+C),e=r((e+"").replace(RegExp(i,"i"),n.label||n).replace(/ ce$/i," CE").replace(/hpw/i,"web").replace(/Macintosh/,"Mac OS").replace(/_PowerPC/i," OS").replace(/(OS X) [^ \d]+/i,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/x86\.64/gi,"x86_64").split(" on ")[0])),e})}function S(e){return l(e,function(e,n){var i=n.pattern||u(n);return!e&&(e=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=((n.label||e)+"").split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=r(e[0].replace(RegExp(i,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")(\\w)","i"),"$1 $2"))),e})}function T(e){return l(e,function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})}function j(){return this.description||""}t||(t=A);var C,N=t,O=[],M=null,L=t==A,F=L&&k&&"function"==typeof k.version&&k.version(),I=n([{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","Trident","KHTML","Gecko"]),D=p(["Adobe AIR","Arora","Avant Browser","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","Iron","K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini","Opera","Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"MSIE"},"Safari"]),$=S(["BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},"Google TV","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation Vita","TouchPad","Transformer","Xoom"]),P=a({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},LG:{},Motorola:{Xoom:1},Nokia:{},Samsung:{"Galaxy S":1,"Galaxy S2":1},Sony:{"PlayStation Vita":1}}),B=w(["Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(I&&(I=[I]),P&&!$&&($=S([P])),(C=/Google TV/.exec($))&&($=C[0]),/\bSimulator\b/i.test(t)&&($=($?$+" ":"")+"Simulator"),/^iP/.test($)?(D||(D="Safari"),B="iOS"+((C=/ OS ([\d_]+)/i.exec(t))?" "+C[1].replace(/_/g,"."):"")):"Konqueror"!=D||/buntu/i.test(B)?P&&"Google"!=P&&/Chrome|Vita/.test(D+";"+$)?(D="Android Browser",B=/Android/.test(B)?B:"Android"):(!D||(C=!/\bMinefield\b/i.test(t)&&/Firefox|Safari/.exec(D)))&&(D&&!$&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(C+"/")+8))&&(D=null),(C=$||P||B)&&($||P||/Android|Symbian OS|Tablet OS|webOS/.test(B))&&(D=/[a-z]+(?: Hat)?/i.exec(/Android/.test(B)?B:C)+" Browser")):B="Kubuntu",F||(F=T(["(?:Cloud9|CriOS|CrMo|Opera ?Mini|Raven|Silk(?!/[\\d.]+$))","Version",u(D),"(?:Firefox|Minefield|NetFront)"])),"iCab"==I&&parseFloat(F)>3?I=["WebKit"]:(C=/Opera/.test(D)&&"Presto"||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&"WebKit"||!I&&/\bMSIE\b/i.test(t)&&(/^Mac/.test(B)?"Tasman":"Trident"))&&(I=[C]),L){if(s(e,"global"))if(v&&(C=v.lang.System,N=C.getProperty("os.arch"),B=B||C.getProperty("os.name")+" "+C.getProperty("os.version")),"object"==typeof exports&&exports)if(E==d&&"object"==typeof system&&(C=[system])[0]){B||(B=C[0].os||null);try{C[1]=require("ringo/engine").version,F=C[1].join("."),D="RingoJS"}catch(R){C[0].global==h&&(D="Narwhal")}}else"object"==typeof process&&(C=process)&&(D="Node.js",N=C.arch,B=C.platform,F=/[\d.]+/.exec(C.version)[0]);else"Environment"==o(e.environment)&&(D="Rhino");else"ScriptBridgingProxyObject"==o(C=e.runtime)?(D="Adobe AIR",B=C.flash.system.Capabilities.os):"RuntimeObject"==o(C=e.phantom)?(D="PhantomJS",F=(C=C.version||null)&&C.major+"."+C.minor+"."+C.patch):"number"==typeof _.documentMode&&(C=/\bTrident\/(\d+)/i.exec(t))&&(F=[F,_.documentMode],(C=+C[1]+4)!=F[1]&&(O.push("IE "+F[1]+" mode"),I[1]="",F[1]=C),F="IE"==D?F[1].toFixed(1)+"":F[0]);B=B&&r(B)}return F&&(C=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(F)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(L&&x.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(M=/b/i.test(C)?"beta":"alpha",F=F.replace(RegExp(C+"\\+?$"),"")+("beta"==M?b:y)+(/\d+\+?/.exec(C)||"")),"Fennec"==D?D="Firefox Mobile":"Maxthon"==D&&F?F=F.replace(/\.[\d.]+/,".x"):"Silk"==D?(/Mobi/i.test(t)||(B="Android",O.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&O.unshift("accelerated")):"IE"==D&&(C=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(D+=" Mobile",B="Windows Phone OS "+C+".x",O.unshift("desktop mode")):"IE"!=D&&(!D||$||/Browser|Mobi/.test(D))||"Windows CE"!=B&&!/Mobi/i.test(t)?"IE"==D&&L&&"object"==typeof external&&!external?O.unshift("platform preview"):/BlackBerry/.test($)&&(C=(RegExp($.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||F)?(B="Device Software "+C,F=null):this!=i&&(L&&k||/Opera/.test(D)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==D&&/OS X (?:\d+\.){2,}/.test(B)||"IE"==D&&(B&&!/^Win/.test(B)&&F>5.5||/Windows XP/.test(B)&&F>8||8==F&&!/Trident/.test(t)))&&!m.test(C=f.call(i,t.replace(m,"")+";"))&&C.name&&(C="ing as "+C.name+((C=C.version)?" "+C:""),m.test(D)?(/IE/.test(C)&&"Mac OS"==B&&(B=null),C="identify"+C):(C="mask"+C,D=q?r(q.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/IE/.test(C)&&(B=null),L||(F=null)),I=["Presto"],O.push(C)):D+=" Mobile",(C=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(C=[parseFloat(C.replace(/\.(\d)$/,".0$1")),C],"Safari"==D&&"+"==C[1].slice(-1)?(D="WebKit Nightly",M="alpha",F=C[1].slice(0,-1)):(F==C[1]||F==(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])&&(F=null),C=[C[0],(/\bChrome\/([\d.]+)/i.exec(t)||0)[1]],!L||/internal|\n/i.test(""+g)&&!C[1]?(I[1]="like Safari",C=C[0],C=400>C?1:500>C?2:526>C?3:533>C?4:534>C?"4+":535>C?5:"5"):(I[1]="like Chrome",C=C[1]||(C=C[0],530>C?1:532>C?2:532.05>C?3:533>C?4:534.03>C?5:534.07>C?6:534.1>C?7:534.13>C?8:534.16>C?9:534.24>C?10:534.3>C?11:535.01>C?12:535.02>C?"13+":535.07>C?15:535.11>C?16:535.19>C?17:536.05>C?18:536.1>C?19:537.01>C?20:"21")),I[1]+=" "+(C+="number"==typeof C?".x":/[.+]/.test(C)?"":"+"),"Safari"==D&&(!F||parseInt(F)>45)&&(F=C)),"Opera"==D&&(C=/(?:zbov|zvav)$/.exec(B))?(D+=" ",O.unshift("desktop mode"),"zvav"==C?(D+="Mini",F=null):D+="Mobile"):"Safari"==D&&/Chrome/.exec(I[1])&&(O.unshift("desktop mode"),D="Chrome Mobile",F=null,/Mac OS X/.test(B)?(P="Apple",B="iOS 4.3+"):B=null),F&&0==F.indexOf(C=/[\d.]+$/.exec(B))&&t.indexOf("/"+C+"-")>-1&&(B=c(B.replace(C,""))),I&&!/Avant|Nook/.test(D)&&(/Browser|Lunascape|Maxthon/.test(D)||/^(?:Adobe|Arora|Midori|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(D)&&I[1])&&(C=I[I.length-1])&&O.push(C),O.length&&(O=["("+O.join("; ")+")"]),P&&$&&0>$.indexOf(P)&&O.push("on "+P),$&&O.push((/^on /.test(O[O.length-1])?"":"on ")+$),B&&(C=/ ([\d.+]+)$/.exec(B),B={architecture:32,family:C?B.replace(C[0],""):B,version:C?C[1]:null,toString:function(){var e=this.version;return this.family+(e?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(C=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(N))&&!/\bi686\b/i.test(N)&&(B&&(B.architecture=64,B.family=B.family.replace(RegExp(" *"+C),"")),D&&(/WOW64/i.test(t)||L&&/\w(?:86|32)$/.test(x.cpuClass||x.platform))&&O.unshift("32-bit")),t||(t=null),{version:D&&F&&(O.unshift(F),F),name:D&&(O.unshift(D),D),os:B?(D&&!(B==(B+"").split(" ")[0]&&(B==D.split(" ")[0]||$))&&O.push($?"("+B+")":"on "+B),B):{architecture:null,family:null,version:null,toString:function(){return"null"}},description:O.length?O.join(" "):t,layout:I&&I[0],manufacturer:P,prerelease:M,product:$,ua:t,parse:f,toString:j}}var d=e,p="object"==typeof exports&&exports,h="object"==typeof global&&global&&(global==global.global?e=global:global),m=/Opera/,g={}.toString,v=/Java/.test(o(e.java))&&e.java,y=v?"a":"α",b=v?"b":"β",_=e.document||{},w={}.hasOwnProperty,x=e.navigator||{},k=e.operamini||e.opera,q=m.test(q=o(k))?q:k=null,E=this,A=x.userAgent||"";"function"==typeof define&&"object"==typeof define.amd&&define.amd?define([],function(){return f()}):p?i(f(),function(e,t){p[t]=e}):e.platform=f()})(this);