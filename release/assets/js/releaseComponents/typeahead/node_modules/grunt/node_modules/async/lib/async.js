(function(){var e={},t=this,n=t.async;"undefined"!=typeof module&&module.exports?module.exports=e:t.async=e,e.noConflict=function(){return t.async=n,e};var r=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;e.length>n;n+=1)t(e[n],n,e)},i=function(e,t){if(e.map)return e.map(t);var n=[];return r(e,function(e,r,i){n.push(t(e,r,i))}),n},o=function(e,t,n){return e.reduce?e.reduce(t,n):(r(e,function(e,r,i){n=t(n,e,r,i)}),n)},a=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};e.nextTick="undefined"!=typeof process&&process.nextTick?process.nextTick:function(e){setTimeout(e,0)},e.forEach=function(e,t,n){if(n=n||function(){},!e.length)return n();var i=0;r(e,function(r){t(r,function(t){t?(n(t),n=function(){}):(i+=1,i===e.length&&n(null))})})},e.forEachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0,i=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1,r===e.length?n(null):i())})};i()},e.forEachLimit=function(e,t,n,r){if(r=r||function(){},!e.length||0>=t)return r();var i=0,o=0,a=0;(function s(){if(i===e.length)return r();for(;t>a&&e.length>o;)o+=1,a+=1,n(e[o-1],function(t){t?(r(t),r=function(){}):(i+=1,a-=1,i===e.length?r():s())})})()};var s=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.forEach].concat(n))}},u=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[e.forEachSeries].concat(n))}},l=function(e,t,n,r){var o=[];t=i(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n,r){o[e.index]=r,t(n)})},function(e){r(e,o)})};e.map=s(l),e.mapSeries=u(l),e.reduce=function(t,n,r,i){e.forEachSeries(t,function(e,t){r(n,e,function(e,r){n=r,t(e)})},function(e){i(e,n)})},e.inject=e.reduce,e.foldl=e.reduce,e.reduceRight=function(t,n,r,o){var a=i(t,function(e){return e}).reverse();e.reduce(a,n,r,o)},e.foldr=e.reduceRight;var c=function(e,t,n,r){var o=[];t=i(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&o.push(e),t()})},function(){r(i(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.filter=s(c),e.filterSeries=u(c),e.select=e.filter,e.selectSeries=e.filterSeries;var f=function(e,t,n,r){var o=[];t=i(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||o.push(e),t()})},function(){r(i(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};e.reject=s(f),e.rejectSeries=u(f);var p=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(){r()})};e.detect=s(p),e.detectSeries=u(p),e.some=function(t,n,r){e.forEach(t,function(e,t){n(e,function(e){e&&(r(!0),r=function(){}),t()})},function(){r(!1)})},e.any=e.some,e.every=function(t,n,r){e.forEach(t,function(e,t){n(e,function(e){e||(r(!1),r=function(){}),t()})},function(){r(!0)})},e.all=e.every,e.sortBy=function(t,n,r){e.map(t,function(e,t){n(e,function(n,r){n?t(n):t(null,{value:e,criteria:r})})},function(e,t){if(e)return r(e);var n=function(e,t){var n=e.criteria,r=t.criteria;return r>n?-1:n>r?1:0};r(null,i(t.sort(n),function(e){return e.value}))})},e.auto=function(e,t){t=t||function(){};var n=a(e);if(!n.length)return t(null);var i={},s=[],u=function(e){s.unshift(e)},l=function(e){for(var t=0;s.length>t;t+=1)if(s[t]===e)return s.splice(t,1),void 0},c=function(){r(s.slice(0),function(e){e()})};u(function(){a(i).length===n.length&&(t(null,i),t=function(){})}),r(n,function(n){var r=e[n]instanceof Function?[e[n]]:e[n],a=function(e){if(e)t(e),t=function(){};else{var r=Array.prototype.slice.call(arguments,1);1>=r.length&&(r=r[0]),i[n]=r,c()}},s=r.slice(0,Math.abs(r.length-1))||[],f=function(){return o(s,function(e,t){return e&&i.hasOwnProperty(t)},!0)&&!i.hasOwnProperty(n)};if(f())r[r.length-1](a,i);else{var p=function(){f()&&(l(p),r[r.length-1](a,i))};u(p)}})},e.waterfall=function(t,n){if(n=n||function(){},!t.length)return n();var r=function(t){return function(i){if(i)n(i),n=function(){};else{var o=Array.prototype.slice.call(arguments,1),a=t.next();a?o.push(r(a)):o.push(n),e.nextTick(function(){t.apply(null,o)})}}};r(e.iterator(t))()},e.parallel=function(t,n){if(n=n||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);1>=n.length&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.forEach(a(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);1>=i.length&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}},e.series=function(t,n){if(n=n||function(){},t.constructor===Array)e.mapSeries(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);1>=n.length&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.forEachSeries(a(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);1>=i.length&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}},e.iterator=function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return e.length-1>n?t(n+1):null},r};return t(0)},e.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var d=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};e.concat=s(d),e.concatSeries=u(d),e.whilst=function(t,n,r){t()?n(function(i){return i?r(i):(e.whilst(t,n,r),void 0)}):r()},e.until=function(t,n,r){t()?r():n(function(i){return i?r(i):(e.until(t,n,r),void 0)})},e.queue=function(t,n){var i=0,o={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,push:function(t,i){t.constructor!==Array&&(t=[t]),r(t,function(t){o.tasks.push({data:t,callback:"function"==typeof i?i:null}),o.saturated&&o.tasks.length==n&&o.saturated(),e.nextTick(o.process)})},process:function(){if(o.concurrency>i&&o.tasks.length){var e=o.tasks.shift();o.empty&&0==o.tasks.length&&o.empty(),i+=1,t(e.data,function(){i-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&0==o.tasks.length+i&&o.drain(),o.process()})}},length:function(){return o.tasks.length},running:function(){return i}};return o};var h=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&r(n,function(t){console[e](t)}))}]))}};e.log=h("log"),e.dir=h("dir"),e.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),a=t.apply(null,i);a in n?o.apply(null,n[a]):a in r?r[a].push(o):(r[a]=[o],e.apply(null,i.concat([function(){n[a]=arguments;var e=r[a];delete r[a];for(var t=0,i=e.length;i>t;t++)e[t].apply(null,arguments)}])))};return i.unmemoized=e,i},e.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}})();