var path=require("path"),findup=require("../lib/findup-sync.js"),rel=function(e){return"string"==typeof e?path.relative(".",e):e};exports.findup={setUp:function(e){this.cwd=process.cwd(),e()},tearDown:function(e){process.chdir(this.cwd),e()},simple:function(e){e.expect(8);var t={cwd:"test/fixtures/a/b"};e.equal(rel(findup("foo.txt",t)),"test/fixtures/a/foo.txt","should find files"),e.equal(rel(findup("bar.txt",t)),"test/fixtures/a/b/bar.txt","should find files"),e.equal(rel(findup("a.txt",t)),"test/fixtures/a.txt","should find files"),e.equal(rel(findup("?.txt",t)),"test/fixtures/a.txt","should support glob patterns"),e.equal(rel(findup("*.txt",t)),"test/fixtures/a/b/bar.txt","should find the first thing that matches the glob pattern"),e.equal(rel(findup(["b*.txt","f*.txt"],t)),"test/fixtures/a/b/bar.txt","should find the first thing that matches any of the glob patterns"),e.equal(rel(findup(["f*.txt","b*.txt"],t)),"test/fixtures/a/b/bar.txt","should find the first thing that matches any of the glob patterns"),e.equal(findup("not-gonna-exist-i-hope.txt",t),null,"should returning null if no files found"),e.done()},cwd:function(e){e.expect(8),process.chdir("test/fixtures/a/b"),e.equal(rel(findup("foo.txt")),"../foo.txt","should find files"),e.equal(rel(findup("bar.txt")),"bar.txt","should find files"),e.equal(rel(findup("a.txt")),"../../a.txt","should find files"),e.equal(rel(findup("?.txt")),"../../a.txt","should support glob patterns"),e.equal(rel(findup("*.txt")),"bar.txt","should find the first thing that matches the glob pattern"),e.equal(rel(findup(["b*.txt","f*.txt"])),"bar.txt","should find the first thing that matches any of the glob patterns"),e.equal(rel(findup(["f*.txt","b*.txt"])),"bar.txt","should find the first thing that matches any of the glob patterns"),e.equal(findup("not-gonna-exist-i-hope.txt"),null,"should returning null if no files found"),e.done()}};