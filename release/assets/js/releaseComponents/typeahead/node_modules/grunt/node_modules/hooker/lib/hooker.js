/*
 * JavaScript Hooker
 * http://github.com/cowboy/javascript-hooker
 *
 * Copyright (c) 2012 "Cowboy" Ben Alman
 * Licensed under the MIT license.
 * http://benalman.com/about/license/
 */

(function(e){function t(e){this.value=e}function n(e){this.value=e}function r(e,t){this.context=e,this.args=t}function i(e,t,n){var r;if("string"==typeof t)t=[t];else if(null==t){t=[];for(r in e)e.hasOwnProperty(r)&&t.push(r)}for(var i=t.length;i--;)("[object Function]"!==a.call(e[t[i]])||n(e,t[i])===!1)&&t.splice(i,1);return t}var o=[].slice,a={}.toString;e.override=function(e){return new t(e)},e.preempt=function(e){return new n(e)},e.filter=function(e,t){return new r(e,t)},e.hook=function(a,s,u){return null==u&&(u=s,s=null),"function"==typeof u&&(u={pre:u}),i(a,s,function(i,a){function s(){var s,c,f,p=o.call(arguments);return u.passName&&p.unshift(a),u.pre&&(s=u.pre.apply(this,p)),s instanceof r?c=s=l.apply(s.context,s.args):s instanceof n?c=s=s.value:(c=l.apply(this,arguments),s=s instanceof t?s.value:c),u.post&&(f=u.post.apply(this,[c].concat(p)),f instanceof t&&(s=f.value)),u.once&&e.unhook(i,a),s}var l=i[a];return i[a]=s,i[a]!==s?!1:(i[a]._orig=l,void 0)})},e.orig=function(e,t){return e[t]._orig},e.unhook=function(t,n){return i(t,n,function(t,n){var r=e.orig(t,n);return r?(t[n]=r,void 0):!1})}})("object"==typeof exports&&exports||this);