var t=require("tap"),origCwd=process.cwd();process.chdir(__dirname);var glob=require("../"),path=require("path");t.test(".",function(e){glob("/b*/**",{globDebug:!0,root:"."},function(t,n){e.ifError(t),e.like(n,[]),e.end()})}),t.test("a",function(e){console.error("root="+path.resolve("a")),glob("/b*/**",{globDebug:!0,root:path.resolve("a")},function(t,n){e.ifError(t);var r=["/b","/b/c","/b/c/d","/bc","/bc/e","/bc/e/f"].map(function(e){return path.join(path.resolve("a"),e).replace(/\\/g,"/")});e.like(n,r),e.end()})}),t.test("root=a, cwd=a/b",function(e){glob("/b*/**",{globDebug:!0,root:"a",cwd:path.resolve("a/b")},function(t,n){e.ifError(t),e.like(n,["/b","/b/c","/b/c/d","/bc","/bc/e","/bc/e/f"].map(function(e){return path.join(path.resolve("a"),e).replace(/\\/g,"/")})),e.end()})}),t.test("cd -",function(e){process.chdir(origCwd),e.end()});