function ReaderError(e,t,n,r,i){_errors.YAMLError.apply(this),this.name="ReaderError",this.name=e,this.position=t,this.character=n,this.encoding=r,this.reason=i,this.toString=function(){return"unacceptable character "+this.character+": "+this.reason+'\n in "'+this.name+'", position '+this.position}}function Reader(e){if(this.name="<unicode string>",this.stream=null,this.streamPointer=0,this.eof=!0,this.buffer="",this.pointer=0,this.encoding="utf-8",this.index=0,this.line=0,this.column=0,"string"!=typeof e)throw new _errors.YAMLError("Invalid source. String or buffer expected.");this.name="<unicode string>",this.checkPrintable(e),this.buffer=e+"\0"}var $$=require("./common"),_errors=require("./errors"),NON_PRINTABLE=RegExp("[^	\n\r -~ -퟿-�]"),getSingleChar=void 0==="a"[0]?function(e,t){return e.charAt(t)}:function(e,t){return e[t]};$$.inherits(ReaderError,_errors.YAMLError),Reader.prototype.peek=function(e){return e=+e||0,getSingleChar(this.buffer,this.pointer+e)},Reader.prototype.prefix=function(e){return e=+e||1,this.buffer.slice(this.pointer,this.pointer+e)},Reader.prototype.forward=function(e){var t;for(e=void 0!==e?+e:1;e;)t=this.buffer[this.pointer],this.pointer+=1,this.index+=1,"\n\u2028\u2029".indexOf(t)>=0||"\r"===t&&"\n"!==this.buffer[this.pointer]?(this.line+=1,this.column=0):"﻿"!==t&&(this.column+=1),e-=1},Reader.prototype.getMark=function(){return null===this.stream?new _errors.Mark(this.name,this.index,this.line,this.column,this.buffer,this.pointer):new _errors.Mark(this.name,this.index,this.line,this.column,null,null)},Reader.prototype.checkPrintable=function(e){var t,n=(e+"").match(NON_PRINTABLE);if(n)throw t=this.index+this.buffer.length-this.pointer+n.index,new ReaderError(this.name,t,n[0],"unicode","special characters are not allowed")},module.exports.Reader=Reader;