var assert=require("assert"),ArgumentParser=require("../lib/argparse").ArgumentParser,$$=require("../lib/const");describe("suppress defaults",function(){var e,t;it("test actions with suppressed defaults",function(){e=new ArgumentParser({debug:!0}),e.addArgument(["foo"],{"default":$$.SUPPRESS,nargs:"?",defaultValue:$$.SUPPRESS}),e.addArgument(["bar"],{"default":$$.SUPPRESS,nargs:"*",defaultValue:$$.SUPPRESS}),e.addArgument(["--baz"],{"default":$$.SUPPRESS,action:"storeTrue",defaultValue:$$.SUPPRESS}),t=e.parseArgs([]),assert.deepEqual(t,{}),t=e.parseArgs(["a"]),assert.deepEqual(t,{foo:"a"}),t=e.parseArgs(["a","b"]),assert.deepEqual(t,{foo:"a",bar:["b"]}),t=e.parseArgs(["--baz"]),assert.deepEqual(t,{baz:!0}),t=e.parseArgs(["a","--baz"]),assert.deepEqual(t,{foo:"a",baz:!0}),t=e.parseArgs(["--baz","a","b"]),assert.deepEqual(t,{bar:["b"],foo:"a",baz:!0}),assert.throws(function(){t=e.parseArgs(["-x"])})}),it("test actions with a parser-level default of SUPPRESS",function(){e=new ArgumentParser({argument_default:$$.SUPPRESS,argumentDefault:$$.SUPPRESS,debug:!0}),e.addArgument(["foo"],{nargs:"?"}),e.addArgument(["bar"],{nargs:"*"}),e.addArgument(["--baz"],{action:"storeTrue"}),t=e.parseArgs([]),assert.deepEqual(t,{}),t=e.parseArgs(["a"]),assert.deepEqual(t,{foo:"a"}),t=e.parseArgs(["a","b"]),assert.deepEqual(t,{foo:"a",bar:["b"]}),t=e.parseArgs(["--baz"]),assert.deepEqual(t,{baz:!0}),t=e.parseArgs(["a","--baz"]),assert.deepEqual(t,{foo:"a",baz:!0}),t=e.parseArgs(["--baz","a","b"]),assert.deepEqual(t,{bar:["b"],foo:"a",baz:!0}),assert.throws(function(){t=e.parseArgs(["-x"])})})});