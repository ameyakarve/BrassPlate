function glob(e,t,n){if("function"==typeof t&&(n=t,t={}),t||(t={}),"number"==typeof t)return deprecated(),void 0;var r=new Glob(e,t,n);return r.sync?r.found:r}function deprecated(){throw Error("glob's interface has changed. Please see the docs.")}function globSync(e,t){return"number"==typeof t?(deprecated(),void 0):(t=t||{},t.sync=!0,glob(e,t))}function Glob(e,t,n){function r(e,t){this._process(e,0,t,function(e){e&&this.emit("error",e),0>=--a&&this._finish()})}if(!(this instanceof Glob))return new Glob(e,t,n);"function"==typeof n&&(this.on("error",n),this.on("end",function(e){n(null,e)})),t=t||{},this.EOF={},this._emitQueue=[],this.maxDepth=t.maxDepth||1e3,this.maxLength=t.maxLength||1/0,this.statCache=t.statCache||{},this.changedCwd=!1;var i=process.cwd();if(t.hasOwnProperty("cwd")?(this.cwd=t.cwd,this.changedCwd=path.resolve(t.cwd)!==i):this.cwd=i,this.root=t.root||path.resolve(this.cwd,"/"),this.root=path.resolve(this.root),"win32"===process.platform&&(this.root=this.root.replace(/\\/g,"/")),this.nomount=!!t.nomount,!e)throw Error("must provide pattern");if(t.matchBase&&-1===e.indexOf("/")){if(t.noglobstar)throw Error("base matching requires globstar");e="**/"+e}this.strict=t.strict!==!1,this.dot=!!t.dot,this.mark=!!t.mark,this.sync=!!t.sync,this.nounique=!!t.nounique,this.nonull=!!t.nonull,this.nosort=!!t.nosort,this.nocase=!!t.nocase,this.stat=!!t.stat,this.debug=!!t.debug||!!t.globDebug,this.debug&&(this.log=console.error),this.silent=!!t.silent;var o=this.minimatch=new Minimatch(e,t);this.options=o.options,e=this.pattern=o.pattern,this.error=null,this.aborted=!1,EE.call(this);var a=this.minimatch.set.length;this.matches=Array(a),this.minimatch.set.forEach(r.bind(this))}function alphasorti(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),alphasort(e,t)}function alphasort(e,t){return e>t?1:t>e?-1:0}function absWin(e){if(absUnix(e))return!0;var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,n=t.exec(e),r=n[1]||"",i=r&&":"!==r.charAt(1),o=!!n[2]||i;return o}function absUnix(e){return"/"===e.charAt(0)||""===e}module.exports=glob;var fs=require("graceful-fs"),minimatch=require("minimatch"),Minimatch=minimatch.Minimatch,inherits=require("inherits"),EE=require("events").EventEmitter,path=require("path"),isDir={},assert=require("assert").ok;glob.fnmatch=deprecated,glob.sync=globSync,glob.Glob=Glob,inherits(Glob,EE),Glob.prototype.log=function(){},Glob.prototype._finish=function(){assert(this instanceof Glob);for(var e=this.nounique,t=e?[]:{},n=0,r=this.matches.length;r>n;n++){var i=this.matches[n];if(this.log("matches[%d] =",n,i),i){var o=Object.keys(i);e?t.push.apply(t,o):o.forEach(function(e){t[e]=!0})}else if(this.nonull){var a=this.minimatch.globSet[n];e?t.push(a):t[a]=!0}}e||(t=Object.keys(t)),this.nosort||(t=t.sort(this.nocase?alphasorti:alphasort)),this.mark&&(t=t.map(function(e){var t=this.statCache[e];if(!t)return e;var n=Array.isArray(t)||2===t;return n&&"/"!==e.slice(-1)?e+"/":n||"/"!==e.slice(-1)?e:e.replace(/\/+$/,"")},this)),this.log("emitting end",t),this.EOF=this.found=t,this.emitMatch(this.EOF)},Glob.prototype.abort=function(){this.aborted=!0,this.emit("abort")},Glob.prototype.pause=function(){this.paused||(this.sync&&this.emit("error",Error("Can't pause/resume sync glob")),this.paused=!0,this.emit("pause"))},Glob.prototype.resume=function(){this.paused&&(this.sync&&this.emit("error",Error("Can't pause/resume sync glob")),this.paused=!1,this.emit("resume"),this._processEmitQueue())},Glob.prototype.emitMatch=function(e){this._emitQueue.push(e),this._processEmitQueue()},Glob.prototype._processEmitQueue=function(e){for(;!this._processingEmitQueue&&!this.paused;){this._processingEmitQueue=!0;var e=this._emitQueue.shift();if(!e){this._processingEmitQueue=!1;break}this.log("emit!",e===this.EOF?"end":"match"),this.emit(e===this.EOF?"end":"match",e),this._processingEmitQueue=!1}},Glob.prototype._process=function(e,t,n,r){assert(this instanceof Glob);var i=function i(e,t){assert(this instanceof Glob),this.paused?(this._processQueue||(this._processQueue=[],this.once("resume",function(){var e=this._processQueue;this._processQueue=null,e.forEach(function(e){e()})})),this._processQueue.push(r.bind(this,e,t))):r.call(this,e,t)}.bind(this);if(this.aborted)return i();if(t>this.maxDepth)return i();for(var o=0;"string"==typeof e[o];)o++;var a;switch(o){case e.length:return a=e.join("/"),this._stat(a,function(e){return e&&(a&&isAbsolute(a)&&!this.nomount&&(a="/"===a.charAt(0)?path.join(this.root,a):path.resolve(this.root,a)),"win32"===process.platform&&(a=a.replace(/\\/g,"/")),this.matches[n]=this.matches[n]||{},this.matches[n][a]=!0,this.emitMatch(a)),i()}),void 0;case 0:a=null;break;default:a=e.slice(0,o),a=a.join("/")}var s;return null===a?s=".":isAbsolute(a)||isAbsolute(e.join("/"))?(a&&isAbsolute(a)||(a=path.join("/",a)),s=a=path.resolve(a),this.log("absolute: ",a,this.root,e,s)):s=a,this.log("readdir(%j)",s,this.cwd,this.root),this._readdir(s,function(r,s){if(r)return i();if(e[o]===minimatch.GLOBSTAR){var u=[e.slice(0,o).concat(e.slice(o+1))];s.forEach(function(t){("."!==t.charAt(0)||this.dot)&&(u.push(e.slice(0,o).concat(t).concat(e.slice(o+1))),u.push(e.slice(0,o).concat(t).concat(e.slice(o))))},this);var l=u.length,c=null;return u.forEach(function(e){this._process(e,t+1,n,function(e){return c?void 0:e?i(c=e):0>=--l?i():void 0})},this),void 0}var f=e[o];if("string"==typeof f){var p=-1!==s.indexOf(f);s=p?s[f]:[]}else{var d=e[o]._glob,h=this.dot||"."===d.charAt(0);s=s.filter(function(t){return("."!==t.charAt(0)||h)&&("string"==typeof e[o]&&t===e[o]||t.match(e[o]))})}if(o===e.length-1&&!this.mark&&!this.stat)return s.forEach(function(e){a&&(e="/"!==a?a+"/"+e:a+e),"/"!==e.charAt(0)||this.nomount||(e=path.join(this.root,e)),"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this.matches[n]=this.matches[n]||{},this.matches[n][e]=!0,this.emitMatch(e)},this),i.call(this);var l=s.length,c=null;return 0===l?i():(s.forEach(function(r){var a=e.slice(0,o).concat(r).concat(e.slice(o+1));this._process(a,t+1,n,function(e){return c?void 0:e?i(c=e):0===--l?i.call(this):void 0})},this),void 0)})},Glob.prototype._stat=function(e,t){assert(this instanceof Glob);var n=e;if("/"===e.charAt(0)?n=path.join(this.root,e):this.changedCwd&&(n=path.resolve(this.cwd,e)),this.log("stat",[this.cwd,e,"=",n]),e.length>this.maxLength){var r=Error("Path name too long");return r.code="ENAMETOOLONG",r.path=e,this._afterStat(e,n,t,r)}if(this.statCache.hasOwnProperty(e)){var i=this.statCache[e],o=i&&(Array.isArray(i)||2===i);return this.sync?t.call(this,!!i,o):process.nextTick(t.bind(this,!!i,o))}if(this.sync){var r,a;try{a=fs.statSync(n)}catch(s){r=s}this._afterStat(e,n,t,r,a)}else fs.stat(n,this._afterStat.bind(this,e,n,t))},Glob.prototype._afterStat=function(e,t,n,r,i){var o;assert(this instanceof Glob),"/"===t.slice(-1)&&i&&!i.isDirectory()&&(this.log("should be ENOTDIR, fake it"),r=Error("ENOTDIR, not a directory '"+t+"'"),r.path=t,r.code="ENOTDIR",i=null),o=r||!i?!1:i.isDirectory()?2:1,this.statCache[e]=this.statCache[e]||o,n.call(this,!!o,2===o)},Glob.prototype._readdir=function(e,t){assert(this instanceof Glob);var n=e;if("/"===e.charAt(0)?n=path.join(this.root,e):isAbsolute(e)?n=e:this.changedCwd&&(n=path.resolve(this.cwd,e)),this.log("readdir",[this.cwd,e,n]),e.length>this.maxLength){var r=Error("Path name too long");return r.code="ENAMETOOLONG",r.path=e,this._afterReaddir(e,n,t,r)}if(this.statCache.hasOwnProperty(e)){var i=this.statCache[e];if(Array.isArray(i))return this.sync?t.call(this,null,i):process.nextTick(t.bind(this,null,i));if(!i||1===i){var o=i?"ENOTDIR":"ENOENT",r=Error((i?"Not a directory":"Not found")+": "+e);return r.path=e,r.code=o,this.log(e,r),this.sync?t.call(this,r):process.nextTick(t.bind(this,r))}}if(this.sync){var r,a;try{a=fs.readdirSync(n)}catch(s){r=s}return this._afterReaddir(e,n,t,r,a)}fs.readdir(n,this._afterReaddir.bind(this,e,n,t))},Glob.prototype._afterReaddir=function(e,t,n,r,i){if(assert(this instanceof Glob),i&&!r)return this.statCache[e]=i,this.mark||this.stat||i.forEach(function(t){t="/"===e?e+t:e+"/"+t,this.statCache[t]=!0},this),n.call(this,r,i);if(r)switch(r.code){case"ENOTDIR":return this.statCache[e]=1,n.call(this,r);case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":return this.statCache[e]=!1,n.call(this,r);default:return this.statCache[e]=!1,this.strict&&this.emit("error",r),this.silent||console.error("glob error",r),n.call(this,r)}};var isAbsolute="win32"===process.platform?absWin:absUnix;