function convertStructure(e){var t,n,r,i,o;if(e.checkEvent(Events.ScalarEvent))return t=e.getEvent(),!!t.tag||!!t.anchor||!!t.value;if(e.checkEvent(Events.SequenceStartEvent)){for(n=[],e.getEvent();!e.checkEvent(Events.SequenceEndEvent);)n.push(convertStructure(e));return e.getEvent(),n}if(e.checkEvent(Events.MappingStartEvent)){for(r=[],e.getEvent();!e.checkEvent(Events.MappingEndEvent);)i=convertStructure(e),o=convertStructure(e),r.push([i,o]);return e.getEvent(),r}return e.checkEvent(Events.AliasEvent)?(e.getEvent(),"*"):(e.getEvent(),"?")}var Assert=require("assert"),Fs=require("fs"),Loader=require("../../lib/js-yaml/loader"),Events=require("../../lib/js-yaml/events"),Helper=require("../helper");module.exports={"Test tokens":Helper.functional({dirname:__dirname+"/data",files:[".data",".structure"],test:function(e,t){var n,r,i=[];for(n=JSON.parse(Fs.readFileSync(t,"utf8")),r=new Loader.SafeLoader(Fs.readFileSync(e,"utf8"));r.checkEvent();)r.checkEvent(Events.StreamStartEvent,Events.StreamEndEvent,Events.DocumentStartEvent,Events.DocumentEndEvent)?r.getEvent():i.push(convertStructure(r));1===i.length&&(i=i.shift()),Assert.deepEqual(i,n)}})};