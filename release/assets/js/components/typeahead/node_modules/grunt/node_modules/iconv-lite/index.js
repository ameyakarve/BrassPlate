function toInternalEncoding(e){return new Buffer(ensureString(e),this.options.originalEncoding)}function fromInternalEncoding(e){return ensureBuffer(e).toString(this.options.originalEncoding)}function toTableEncoding(e){e=ensureString(e);for(var t,n,r=e.length,i=this.options.revCharsTable,o=new Buffer(2*r),a=i[iconv.defaultCharUnicode.charCodeAt(0)],s=0,u=0;r>s;s++)n=e.charCodeAt(s),n>>7?(t=i[n]||a,o[u++]=t>>8,o[u++]=255&t):o[u++]=n;return o.slice(0,u)}function fromTableEncoding(e){e=ensureBuffer(e);for(var t,n,r=e.length,i=this.options.table,o=new Buffer(2*r),a=iconv.defaultCharUnicode.charCodeAt(0),s=0,u=0;r>s;s++,u+=2)n=e[s],128&n?(n=(n<<8)+e[++s],t=i[n]||a):t=n,o[u]=255&t,o[u+1]=t>>8;return o.slice(0,u).toString("ucs2")}function toSingleByteEncoding(e){e=ensureString(e);for(var t=new Buffer(e.length),n=this.options.revCharsBuf,r=0;e.length>r;r++)t[r]=n[e.charCodeAt(r)];return t}function fromSingleByteEncoding(e){e=ensureBuffer(e);for(var t=this.options.charsBuf,n=new Buffer(2*e.length),r=0,i=0,o=0,a=e.length;a>o;o++)r=2*e[o],i=2*o,n[i]=t[r],n[i+1]=t[r+1];return n.toString("ucs2")}function applyEncodings(e){for(var t in e)iconv.encodings[t]=e[t]}var iconv=module.exports={toEncoding:function(e,t){return iconv.getCodec(t).toEncoding(e)},fromEncoding:function(e,t){return iconv.getCodec(t).fromEncoding(e)},defaultCharUnicode:"ï¿½",defaultCharSingleByte:"?",getCodec:function(e){for(var t=e||"utf8",n=void 0;;){"String"===getType(t)&&(t=t.replace(/[- ]/g,"").toLowerCase());var r=iconv.encodings[t],i=getType(r);if("String"===i)n={originalEncoding:t},t=r;else{if("Object"!==i||void 0==r.type){if("Function"===i)return r(n);throw Error("Encoding not recognized: '"+e+"' (searched as: '"+t+"')")}n=r,t=r.type}}},encodings:{internal:function(e){return{toEncoding:toInternalEncoding,fromEncoding:fromInternalEncoding,options:e}},utf8:"internal",ucs2:"internal",binary:"internal",ascii:"internal",base64:"internal",singlebyte:function(e){if(!e.charsBuf){if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");128===e.chars.length&&(e.chars=asciiString+e.chars),e.charsBuf=new Buffer(e.chars,"ucs2")}if(!e.revCharsBuf){e.revCharsBuf=new Buffer(65536);for(var t=iconv.defaultCharSingleByte.charCodeAt(0),n=0;e.revCharsBuf.length>n;n++)e.revCharsBuf[n]=t;for(var n=0;e.chars.length>n;n++)e.revCharsBuf[e.chars.charCodeAt(n)]=n}return{toEncoding:toSingleByteEncoding,fromEncoding:fromSingleByteEncoding,options:e}},table:function(e){if(!e.table)throw Error("Encoding '"+e.type+"' has incorect 'table' option");if(!e.revCharsTable){for(var t=e.revCharsTable={},n=0;65535>=n;n++)t[n]=0;var r=e.table;for(var i in r)t[r[i]]=+i}return{toEncoding:toTableEncoding,fromEncoding:fromTableEncoding,options:e}}}};iconv.encode=iconv.toEncoding,iconv.decode=iconv.fromEncoding,applyEncodings(require("./encodings/singlebyte")),applyEncodings(require("./encodings/gbk"));var asciiString="\0\b	\n\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",ensureBuffer=function(e){return e=e||new Buffer(0),e instanceof Buffer?e:new Buffer(""+e,"utf8")},ensureString=function(e){return e=e||"",e instanceof String?e:e.toString(e instanceof Buffer?"utf8":void 0)},getType=function(e){return Object.prototype.toString.call(e).slice(8,-1)};