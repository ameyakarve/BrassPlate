(function(){define("vendor/bootstrap/bootstrap-alert",["jquery"],function(){!function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){i.trigger("closed").remove()}var i,o=t(this),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=t(r),e&&e.preventDefault(),i.length||(i=o.hasClass("alert")?o:o.parent()),i.trigger(e=t.Event("close")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.on(t.support.transition.end,n):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),o=i.data("alert");o||i.data("alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.alert.data-api",e,n.prototype.close)}(window.jQuery)}),define("vendor/bootstrap/bootstrap-button",["jquery"],function(){!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,n)};e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),o=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[o]()),n[o](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),o=i.data("button"),r="object"==typeof n&&n;o||i.data("button",o=new e(this,r)),"toggle"==n?o.toggle():n&&o.setState(n)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery)}),define("vendor/bootstrap/bootstrap-modal",["jquery"],function(){!function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var i=t(this),o=i.data("modal"),r=t.extend({},t.fn.modal.defaults,i.data(),"object"==typeof n&&n);o||i.data("modal",o=new e(this,r)),"string"==typeof n?o[n]():r.show&&o.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),o=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),n.data());e.preventDefault(),o.modal(r).one("hide",function(){n.focus()})})}(window.jQuery)}),define("vendor/bootstrap/bootstrap-combined",["jquery"],function(){return!function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var i=t(this),o=i.data("modal"),r=t.extend({},t.fn.modal.defaults,i.data(),"object"==typeof n&&n);o||i.data("modal",o=new e(this,r)),"string"==typeof n?o[n]():r.show&&o.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),o=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),n.data());e.preventDefault(),o.modal(r).one("hide",function(){n.focus()})})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,n)};e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),o=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[o]()),n[o](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),o=i.data("button"),r="object"==typeof n&&n;o||i.data("button",o=new e(this,r)),"toggle"==n?o.toggle():n&&o.setState(n)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){i.trigger("closed").remove()}var i,o=t(this),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=t(r),e&&e.preventDefault(),i.length||(i=o.hasClass("alert")?o:o.parent()),i.trigger(e=t.Event("close")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.on(t.support.transition.end,n):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),o=i.data("alert");o||i.data("alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.alert.data-api",e,n.prototype.close)}(window.jQuery),{addItem:'<div class="row-fluid itemRow" id="addedItem{{index}}"><div class="span7 itemName">{{data.NAME}}</div><div class="span1 itemName">{{data.PRICE}}</div><div class="span1"><input id="itemQuantity{{index}}" class="inputQuantity input-block-level" type="number" value=0></div><div class="span1 itemName">{{data.UNIT}}</div><div class="span1 itemValue" id="itemValue{{index}}">0.00</div><div class="span1 itemRemove"><a class="btn btn-danger" id="removeItem{{index}}"><i class="icon-remove-circle icon-black"></i></a></div></div>',typeAhead:'<input class="input-large" type="text" id="ingredientTypeahead" placeholder="Start typing ingredient name" /> <span class="help-inline itemName" id="inputWarning"></span>',formSuccess:'<div class="alert alert-block" id="ingredientBoxSuccessAlert">You can haz succesz <a class="close" data-dismiss="alert" id="ingredientBoxSuccessAlertClose">&times;</a> </div>',formError:'<div class="alert alert-block alert-error" id="ingredientBoxErrorAlert">You can haz error	<a class="close" data-dismiss="alert" id="ingredientBoxErrorAlertClose">&times;</a></div>'}}),define("vendor/twitter-typeahead/typeahead",["jquery"],function(t){(function(){var e="0.8.1",n={isMsie:function(){return/msie [\w.]+/i.test(navigator.userAgent)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:function(t){return t===Object(t)},isUndefined:function(t){return t===void 0},bind:t.proxy,bindAll:function(e){var i;for(var o in e)n.isFunction(i=e[o])&&(e[o]=t.proxy(i,e))},indexOf:function(t,e){for(var n=0;t.length>n;n++)if(t[n]===e)return n;return-1},each:t.each,map:t.map,filter:function(e,n){var i=[];return t.each(e,function(t,o){n(o,t,e)&&i.push(o)}),i},every:function(e,n){var i=!0;return e?(t.each(e,function(t,o){return(i=n.call(null,o,t,e))?void 0:!1}),!!i):i},mixin:t.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),debounce:function(t,e,n){var i,o;return function(){var r,s,a=this,u=arguments;return r=function(){i=null,n||(o=t.apply(a,u))},s=n&&!i,clearTimeout(i),i=setTimeout(r,e),s&&(o=t.apply(a,u)),o}},throttle:function(t,e){var n,i,o,r,s,a;return s=0,a=function(){s=new Date,o=null,r=t.apply(n,i)},function(){var u=new Date,l=e-(u-s);return n=this,i=arguments,0>=l?(clearTimeout(o),o=null,s=u,r=t.apply(n,i)):o||(o=setTimeout(a,l)),r}},uniqueArray:function(t){for(var e={},n=[],i=0,o=t.length;o>i;++i)e.hasOwnProperty(t[i])||(n.push(t[i]),e[t[i]]=1);return n},tokenizeQuery:function(e){return t.trim(e).toLowerCase().split(/[\s]+/)},tokenizeText:function(e){return t.trim(e).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},i=function(){var t=/\s+/;return{on:function(e,n){var i;if(!n)return this;for(this._callbacks=this._callbacks||{},e=e.split(t);i=e.shift();)this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push(n);return this},trigger:function(e,n){var i,o;if(!this._callbacks)return this;for(e=e.split(t);i=e.shift();)if(o=this._callbacks[i])for(var r=0;o.length>r;r+=1)o[r].call(this,{type:i,data:n});return this}}}(),o=function(){function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=RegExp("^"+this.prefix)}function e(){return(new Date).getTime()}function i(t){return JSON.stringify(n.isUndefined(t)?null:t)}function o(t){return JSON.parse(t)}var r,s=window.localStorage;return r=window.localStorage&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),o(s.getItem(this._prefix(t)))},set:function(t,o,r){return n.isNumber(r)?s.setItem(this._ttlKey(t),i(e()+r)):s.removeItem(this._ttlKey(t)),s.setItem(this._prefix(t),i(o))},remove:function(t){return s.removeItem(this._ttlKey(t)),s.removeItem(this._prefix(t)),this},clear:function(){var t,e,n=[],i=s.length;for(t=0;i>t;t++)(e=s.key(t)).match(this.keyMatcher)&&n.push(e.replace(this.keyMatcher,""));for(t=n.length;t--;)this.remove(n[t]);return this},isExpired:function(t){var i=o(s.getItem(this._ttlKey(t)));return n.isNumber(i)&&e()>i?!0:!1}}:{get:n.noop,set:n.noop,remove:n.noop,clear:n.noop,isExpired:n.noop},n.mixin(t.prototype,r),t}(),r=function(){function t(t){n.bindAll(this),t=t||{},this.sizeLimit=t.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return n.mixin(t.prototype,{get:function(t){return this.cache[t]},set:function(t,e){var n;this.cachedKeysByAge.length===this.sizeLimit&&(n=this.cachedKeysByAge.shift(),delete this.cache[n]),this.cache[t]=e,this.cachedKeysByAge.push(t)}}),t}(),s=function(){function e(t){var e;n.bindAll(this),t=t||{},e=/^throttle$/i.test(t.rateLimitFn)?n.throttle:n.debounce,this.wait=t.wait||300,this.wildcard=t.wildcard||"%QUERY",this.maxConcurrentRequests=t.maxConcurrentRequests||6,this.concurrentRequests=0,this.onDeckRequestArgs=null,this.cache=new r,this.get=e(this.get,this.wait)}return n.mixin(e.prototype,{_incrementConcurrentRequests:function(){this.concurrentRequests++},_decrementConcurrentRequests:function(){this.concurrentRequests--},_belowConcurrentRequestsThreshold:function(){return this.concurrentRequests<this.maxConcurrentRequests},get:function(e,n,i){var o,r=this;e=e.replace(this.wildcard,encodeURIComponent(n||"")),(o=this.cache.get(e))?i&&i(o):this._belowConcurrentRequestsThreshold()?t.ajax({url:e,type:"GET",dataType:"json",beforeSend:function(){r._incrementConcurrentRequests()},success:function(t){i&&i(t),r.cache.set(e,t)},complete:function(){r._decrementConcurrentRequests(),r.onDeckRequestArgs&&(r.get.apply(r,r.onDeckRequestArgs),r.onDeckRequestArgs=null)}}):this.onDeckRequestArgs=[].slice.call(arguments,0)}}),e}(),a=function(){function i(t){n.bindAll(this),this.storage=new o(t.name),this.adjacencyList={},this.itemHash={},this.name=t.name,this.resetDataOnProtocolSwitch=t.resetDataOnProtocolSwitch||!1,this.queryUrl=t.remote,this.transport=t.transport,this.limit=t.limit||10,this._customMatcher=t.matcher||null,this._customRanker=t.ranker||null,this._ttl_ms=t.ttl_ms||2592e5,this.keys={version:"version",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"},t.local&&this._processLocalData(t.local),t.prefetch&&this._loadPrefetchData(t.prefetch)}return n.mixin(i.prototype,{_processLocalData:function(t){t&&this._mergeProcessedData(this._processData(t))},_loadPrefetchData:function(i){function o(t){var i=r._processData(t),o=i.itemHash,s=i.adjacencyList;r.storage.set(r.keys.itemHash,o,r._ttl_ms),r.storage.set(r.keys.adjacencyList,s,r._ttl_ms),r.storage.set(r.keys.version,e,r._ttl_ms),r.storage.set(r.keys.protocol,n.getProtocol(),r._ttl_ms),r._mergeProcessedData(i)}var r=this,s=this.storage.get(this.keys.itemHash),a=this.storage.get(this.keys.adjacencyList),u=this.storage.get(this.keys.protocol),l=this.storage.get(this.keys.version),d=l!==e||u!==n.getProtocol();s&&a&&!d?this._mergeProcessedData({itemHash:s,adjacencyList:a}):t.getJSON(i).done(o)},_processData:function(t){var e={},i={};return n.each(t,function(t,o){var r;n.isString(o)&&(o={value:o,tokens:n.tokenizeText(o)}),o.tokens=n.map(o.tokens||[],function(t){return t.toLowerCase()}),e[r=n.getUniqueId(o.value)]=o,n.each(o.tokens,function(t,e){var o=e.charAt(0),s=i[o]||(i[o]=[r]);!~n.indexOf(s,r)&&s.push(r)})}),{itemHash:e,adjacencyList:i}},_mergeProcessedData:function(t){var e=this;n.mixin(this.itemHash,t.itemHash),n.each(t.adjacencyList,function(t,n){var i=e.adjacencyList[t];e.adjacencyList[t]=i?i.concat(n):n})},_getPotentiallyMatchingIds:function(e){var i=[],o=[];if(n.map(e,n.bind(function(t){var e=this.adjacencyList[t.charAt(0)];e&&o.push(e)},this)),1===o.length)return o[0];var r=[];t.each(o,function(t,e){r.push(e.length)});var s=n.indexOf(r,Math.min.apply(null,r))||0,a=o[s]||[];return i=n.map(a,function(t){var e=n.every(o,function(e){return n.indexOf(e,t)>-1});return e?t:void 0})},_getItemsFromIds:function(t){var e=[];return n.map(t,n.bind(function(t){var n=this.itemHash[t];n&&e.push(n)},this)),e},_matcher:function(t){if(this._customMatcher){var e=this._customMatcher;return function(t){return e(t)}}return function(e){var i=e.tokens,o=n.every(t,function(t){var e=n.filter(i,function(e){return 0===e.indexOf(t)});return e.length});return o?e:void 0}},_compareItems:function(t,e,n){var i=t.score_boost?t.score_boost:0,o=e.score_boost?e.score_boost:0,r=t.score?t.score:0,s=e.score?e.score:0;return n?e.weight+o-(t.weight+i):s+o-(r+i)},_ranker:function(t,e){if(this._customRanker)return this._customRanker(t,e);var n=t.weight&&0!==t.weight,i=e.weight&&0!==e.weight;return n&&!i?-1:i&&!n?1:n&&i?this._compareItems(t,e,!0):this._compareItems(t,e,!1)},_processRemoteSuggestions:function(t,e){var i=this;return function(o){n.each(o,function(t,o){var r=!1;return o=n.isString(o)?{value:o}:o,n.each(e,function(t,e){return o.value===e.value?(r=!0,!1):void 0}),!r&&e.push(o),e.length<i.limit}),t&&t(e)}},getSuggestions:function(t,e){var i=n.tokenizeQuery(t),o=this._getPotentiallyMatchingIds(i),r=this._getItemsFromIds(o),s=n.filter(r,this._matcher(i));s.sort(this._ranker),e&&e(s),s.length<this.limit&&this.queryUrl&&this.transport.get(this.queryUrl,t,this._processRemoteSuggestions(e,s))}}),i}(),u=function(){function e(e){var i=this;n.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.query="",this.$hint=t(e.hint),this.$input=t(e.input).on("blur",this._handleBlur).on("focus",this._handleFocus).on("keydown",this._handleSpecialKeyEvent),n.isMsie()?this.$input.on("keydown keypress cut paste",function(t){i.specialKeyCodeMap[t.which||t.keyCode]||setTimeout(i._compareQueryToInputValue,0)}):this.$input.on("input",this._compareQueryToInputValue),this.$overflowHelper=o(this.$input)}function o(e){return t("<span></span>").css({display:"none",position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function r(t,e){return t=(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ").toLowerCase(),e=(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ").toLowerCase(),t===e}return n.mixin(e.prototype,i,{_handleFocus:function(){this.trigger("focus")},_handleBlur:function(){this.trigger("blur")},_handleSpecialKeyEvent:function(t){var e=this.specialKeyCodeMap[t.which||t.keyCode];e&&this.trigger(e,t)},_compareQueryToInputValue:function(){var t=this.getInputValue(),e=r(this.query,t),n=e?this.query.length!==t.length:!1;n?this.trigger("whitespaceChange",{value:this.query}):e||this.trigger("queryChange",{value:this.query=t})},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),e!==!0&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(t){this.$hint.val(t)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var t,e=this.$input.val().length,i=this.$input[0].selectionStart;return n.isNumber(i)?i===e:document.selection?(t=document.selection.createRange(),t.moveStart("character",-e),e===t.text.length):!0}}),e}(),l=function(){function e(e){n.bindAll(this),this.isMouseOverDropdown,this.$menu=t(e.menu).on("mouseenter",this._handleMouseenter).on("mouseleave",this._handleMouseleave).on("mouseover",".tt-suggestions > .tt-suggestion",this._handleMouseover).on("click",".tt-suggestions > .tt-suggestion",this._handleSelection)}function o(t){var e=t.parents(".tt-suggestions").first();return{value:t.data("value"),query:e.data("query"),dataset:e.data("dataset"),data:e.data("suggestions")}}return n.mixin(e.prototype,i,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(e){this._getSuggestions().removeClass("tt-is-under-cursor"),t(e.currentTarget).addClass("tt-is-under-cursor")},_handleSelection:function(e){this.trigger("select",o(t(e.currentTarget)))},_moveCursor:function(t){var e,n,i,o;if(this.$menu.hasClass("tt-is-open")){if(e=this._getSuggestions(),n=e.filter(".tt-is-under-cursor"),n.removeClass("tt-is-under-cursor"),i=e.index(n)+t,i=(i+1)%(e.length+1)-1,-1===i)return this.trigger("cursorOff"),void 0;-1>i&&(i=e.length-1),o=e.eq(i).addClass("tt-is-under-cursor"),this.trigger("cursorOn",{value:o.data("value")})}},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},hideUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.hide()},hide:function(){this.$menu.hasClass("tt-is-open")&&(this.$menu.removeClass("tt-is-open").find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("hide"))},show:function(){this.$menu.hasClass("tt-is-open")||(this.$menu.addClass("tt-is-open"),this.trigger("show"))},isOpen:function(){return this.$menu.hasClass("tt-is-open")},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var t=this._getSuggestions().filter(".tt-is-under-cursor").first();return t.length>0?o(t):null},getFirstSuggestion:function(){var t=this._getSuggestions().first();return t.length>0?o(t):null},renderSuggestions:function(e,i,o){var r,s,a,u="tt-dataset-"+i.name,l=this.$menu.find("."+u);0===l.length&&(l=t('<li><ol class="tt-suggestions"></ol></li>').addClass(u).appendTo(this.$menu)),r=document.createElement("div"),s=document.createDocumentFragment(),this.clearSuggestions(i.name),o.length>0&&(this.$menu.removeClass("tt-is-empty"),n.each(o,function(t,e){r.innerHTML=i.template.render(e),a=r.firstChild,a.setAttribute("data-value",e.value),s.appendChild(a)})),l.find("> .tt-suggestions").data({query:e,dataset:i.name,suggestions:o}).append(s),this.trigger("suggestionsRender")},clearSuggestions:function(t){var e=t?this.$menu.find(".tt-dataset-"+t+" .tt-suggestions"):this.$menu.find(".tt-suggestions");e.empty(),0===this._getSuggestions().length&&this.$menu.addClass("tt-is-empty")}}),e}(),d=function(){function e(t){n.bindAll(this),this.$node=o(t.input),this.datasets=t.datasets,n.each(this.datasets,function(t,e){var n='<li class="tt-suggestion">%body</li>';e.template=e.template?e.engine.compile(n.replace("%body",e.template)):{render:function(t){return n.replace("%body","<p>"+t.value+"</p>")}}}),this.inputView=new u({input:this.$node.find(".tt-query"),hint:this.$node.find(".tt-hint")}),this.dropdownView=new l({menu:this.$node.find(".tt-dropdown-menu")}),this.dropdownView.on("select",this._handleSelection).on("cursorOn",this._clearHint).on("cursorOn",this._setInputValueToSuggestionUnderCursor).on("cursorOff",this._setInputValueToQuery).on("cursorOff",this._updateHint).on("suggestionsRender",this._updateHint).on("show",this._updateHint).on("hide",this._clearHint),this.inputView.on("focus",this._showDropdown).on("blur",this._hideDropdown).on("blur",this._setInputValueToQuery).on("enter",this._handleSelection).on("queryChange",this._clearHint).on("queryChange",this._clearSuggestions).on("queryChange",this._getSuggestions).on("whitespaceChange",this._updateHint).on("queryChange whitespaceChange",this._showDropdown).on("queryChange whitespaceChange",this._setLanguageDirection).on("esc",this._hideDropdown).on("esc",this._setInputValueToQuery).on("tab up down",this._managePreventDefault).on("up down",this._moveDropdownCursor).on("up down",this._showDropdown).on("tab left right",this._autocomplete)}function o(e){var n=t(e),i=t(r.hint).css({"background-color":n.css("background-color")});if(0===n.length)return null;try{!n.attr("dir")&&n.attr("dir","auto")}catch(o){}return n.attr({autocomplete:"off",spellcheck:!1}).addClass("tt-query").wrap(r.wrapper).parent().prepend(i).append(r.dropdown)}var r={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input style="display:none;">',dropdown:'<ol class="tt-dropdown-menu tt-is-empty"></ol>'};return n.mixin(e.prototype,i,{_managePreventDefault:function(t){var e,n,i=t.data,o=!1;switch(t.type){case"tab":e=this.inputView.getHintValue(),n=this.inputView.getInputValue(),o=e&&e!==n;break;case"up":case"down":o=!i.shiftKey&&!i.ctrlKey&&!i.metaKey}o&&i.preventDefault()},_setLanguageDirection:function(){var t="tt-"+this.inputView.getLanguageDirection();this.$node.hasClass(t)||this.$node.removeClass("tt-ltr tt-rtl").addClass(t)},_updateHint:function(){var t,e,n,i,o=this.dropdownView.getFirstSuggestion(),r=o?o.value:null;r&&this.dropdownView.isOpen()&&!this.inputView.isOverflow()&&(t=this.inputView.getInputValue(),e=t.replace(/\s{2,}/g," ").replace(/^\s+/g,""),n=RegExp("^(?:"+e+")(.*$)","i"),i=n.exec(r),this.inputView.setHintValue(t+(i?i[1]:"")))},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(t){var e=t.data;this.inputView.setInputValue(e.value,!0)},_showDropdown:function(){this.dropdownView.show()},_hideDropdown:function(t){this.dropdownView["blur"===t.type?"hideUnlessMouseIsOverDropdown":"hide"]()},_moveDropdownCursor:function(t){var e=t.data;e.shiftKey||e.ctrlKey||e.metaKey||this.dropdownView["up"===t.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(t){var e="select"===t.type,i=e?t.data:this.dropdownView.getSuggestionUnderCursor();i&&(this.inputView.setInputValue(i.value),e?this.inputView.focus():t.data.preventDefault(),e&&n.isMsie()?setTimeout(this.dropdownView.hide,0):this.dropdownView.hide())},_getSuggestions:function(){var t=this,e=this.inputView.getQuery();n.each(this.datasets,function(n,i){i.getSuggestions(e,function(n){t._renderSuggestions(e,i,n)})})},_renderSuggestions:function(t,e,n){t===this.inputView.getQuery()&&(n=n.slice(0,e.limit),this.dropdownView.renderSuggestions(t,e,n))},_autocomplete:function(t){var e,n,i,o;("right"!==t.type&&"left"!==t.type||(e=this.inputView.isCursorAtEnd(),n="ltr"===this.inputView.getLanguageDirection()?"left"===t.type:"right"===t.type,e&&!n))&&(i=this.inputView.getQuery(),o=this.inputView.getHintValue(),""!==o&&i!==o&&this.inputView.setInputValue(o))}}),e}();(function(){function e(t){return r[t]?r[t].apply(this,[].slice.call(arguments,1)):r.initialize.apply(this,arguments)}function i(t){l=t}var o,r,u={},l={};jQuery.fn.typeahead=e,e.configureTransport=i,r={initialize:function(i){var r={};if(i=n.isArray(i)?i:[i],0===i.length)throw Error("no datasets provided");return delete e.configureTransport,o=o||new s(l),n.each(i,function(t,e){var i,s=e.name=e.name||n.getUniqueId();if(u[s])i=u[s];else{if(e.limit=e.limit||5,e.template=e.template,e.engine=e.engine,e.template&&!e.engine)throw Error("no template engine specified for "+s);i=u[s]=new a({name:e.name,limit:e.limit,local:e.local,prefetch:e.prefetch,ttl_ms:e.ttl_ms,remote:e.remote,matcher:e.matcher,ranker:e.ranker,transport:o})}r[s]={name:e.name,limit:e.limit,template:e.template,engine:e.engine,getSuggestions:i.getSuggestions}}),this.each(function(){t(this).data({typeahead:new d({input:this,datasets:r})})})}}})()})()}),define("modules/Ingredients/JqueryCalls",["jquery","vendor/bootstrap/bootstrap-alert","vendor/bootstrap/bootstrap-button","vendor/bootstrap/bootstrap-modal","vendor/bootstrap/bootstrap-combined","vendor/twitter-typeahead/typeahead","mustache","underscore"],function(t,e,n,i,o,r,s,a){var u=function(){t("#addNewIngredientFormModal").modal({show:!1,keyboard:!1}),t("#addNewIngredientButton").click(function(){t("#addNewIngredientFormModal").modal("show")}),t("#addIngredientFormSubmit").click(function(){t("#formComponent").trigger({type:"addFormSubmit"}),t("#addIngredientFormSubmit").button("loading"),t("#addIngredientModalClose").button("loading"),t("#addIngredientFormClear").button("loading")}),t("#calculatorComponent").trigger({type:"nextDependencyLoaded"})},l=function(){var e=t("#addIngredientmodalForm").serialize(),n=(new Date).getTime();e+="&CACHEBANG="+n,t.ajax({type:"GET",url:"api/addIngredient",data:e,success:function(e){t("#formComponent").trigger({type:"dataReceived",returnData:e})},error:function(){console.log("Error in request")}})},d=function(e){t("#formTimeStamp").val(e.timestamp)},c=function(e){e.returnData.init||(console.log(e),t("#calculatorComponent").trigger({type:"dataReceived",returnData:e.returnData}),t("#addIngredientFormSubmit").button("reset"),t("#addIngredientModalClose").button("reset"),t("#addIngredientFormClear").button("reset"),e.returnData.addedStatus.success?(t("#formAlertArea").html(s.render(o.formSuccess)),t("#ingredientBoxSuccessAlert").alert()):(t("#formAlertArea").html(s.render(o.formError)),t("#ingredientBoxErrorAlert").alert()))},h=function(){t("#ingredientTypeahead").remove(),t("#inputWarning").remove(),t("#inputControls").html(s.render(o.typeAhead,{})),t("#ingredientTypeahead").typeahead({prefetch:"api/typeaheadHackInit"})
},p=function(e,n){console.log(e),t("#itemList").append(s.render(o.addItem,{data:e,index:n})),t("#removeItem"+n).click(function(){t("#calculatorComponent").trigger({type:"itemRemoved",index:n})}),t("#itemQuantity"+n).on("input",function(){t("#calculatorComponent").trigger({type:"quantitiesChanged",index:n,removed:!1})})},m=function(){t("#warningGroup").addClass("error"),t("#inputWarning").html("This item is already present")},f=function(e){t("#addedItem"+e).remove(),t("#calculatorComponent").trigger({type:"quantitiesChanged",index:e,removed:!0})},g=function(){var e=t(".inputQuantity");return a.map(e,function(t){return isNaN(parseFloat(t.value))?0:0>parseFloat(t.value)?0:parseFloat(t.value)})},v=function(e){console.log(e),t("#totalPriceValue").html(e.toFixed(2))},y=function(e,n){var i=parseFloat(t("#itemQuantity"+e)[0].value);(0>i||isNaN(i))&&(i=0);var o=i*n;t("#itemValue"+e).html(o.toFixed(2))};return{FormInit:u,FormSubmitForm:l,FormReceiveFormData:c,FormSetTimeStamp:d,CalculatorsetTypeAhead:h,CalculatoraddItem:p,CalculatoraddItemError:m,CalculatorremoveItem:f,CalculatorgetQuantityValues:g,CalculatorrenderTotalCost:v,CalculatorrenderTotalCostChange:y}}),define("modules/Ingredients/Calculator",["vendor/flight/lib/component","modules/Ingredients/JqueryCalls","underscore"],function(t,e,n){function i(){this.defaultAttrs({selectedItems:[],quantities:[]}),this.Init=function(){this.attr.selectedItems=[],this.attr.quantities=[]},this.addData=function(t){var e=t.originalEvent.detail.returnData,i=e.data,o=e.value,r=n.pluck(i,"value"),s=r.indexOf(o);if(-1!==s){var a=i[s].uid,u=n.pluck(this.attr.selectedItems,"uid");n.contains(u,a)?console.log("Value found!"):this.attr.selectedItems.push(i[s])}},this.after("initialize",function(){this.Init(),this.on("nextDependencyLoaded",e.CalculatorsetTypeAhead),this.on("dataAdded",this.addData)})}return{calculatorComponent:t(i)}})})();