(function(){(function(t){"function"==typeof define?define("shim",t):"function"==typeof YUI?YUI.add("es5",t):t()})(function(){Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError("Function.prototype.bind called on incompatible "+e);var n=u.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=e.prototype;var o=new r,s=e.apply(o,n.concat(u.call(arguments)));return Object(s)===s?s:o}return e.apply(t,n.concat(u.call(arguments)))};return i});var t,e,n,i,r,o=Function.prototype.call,s=Array.prototype,a=Object.prototype,u=s.slice,c=o.bind(a.toString),l=o.bind(a.hasOwnProperty);if((r=l(a,"__defineGetter__"))&&(t=o.bind(a.__defineGetter__),e=o.bind(a.__defineSetter__),n=o.bind(a.__lookupGetter__),i=o.bind(a.__lookupSetter__)),Array.isArray||(Array.isArray=function(t){return"[object Array]"==c(t)}),Array.prototype.forEach||(Array.prototype.forEach=function(t){var e=w(this),n=arguments[1],i=-1,r=e.length>>>0;if("[object Function]"!=c(t))throw new TypeError;for(;r>++i;)i in e&&t.call(n,e[i],i,e)}),Array.prototype.map||(Array.prototype.map=function(t){var e=w(this),n=e.length>>>0,i=Array(n),r=arguments[1];if("[object Function]"!=c(t))throw new TypeError(t+" is not a function");for(var o=0;n>o;o++)o in e&&(i[o]=t.call(r,e[o],o,e));return i}),Array.prototype.filter||(Array.prototype.filter=function(t){var e,n=w(this),i=n.length>>>0,r=[],o=arguments[1];if("[object Function]"!=c(t))throw new TypeError(t+" is not a function");for(var s=0;i>s;s++)s in n&&(e=n[s],t.call(o,e,s,n)&&r.push(e));return r}),Array.prototype.every||(Array.prototype.every=function(t){var e=w(this),n=e.length>>>0,i=arguments[1];if("[object Function]"!=c(t))throw new TypeError(t+" is not a function");for(var r=0;n>r;r++)if(r in e&&!t.call(i,e[r],r,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var e=w(this),n=e.length>>>0,i=arguments[1];if("[object Function]"!=c(t))throw new TypeError(t+" is not a function");for(var r=0;n>r;r++)if(r in e&&t.call(i,e[r],r,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e=w(this),n=e.length>>>0;if("[object Function]"!=c(t))throw new TypeError(t+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var i,r=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(r in e){i=e[r++];break}if(++r>=n)throw new TypeError("reduce of empty array with no initial value")}for(;n>r;r++)r in e&&(i=t.call(void 0,i,e[r],r,e));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var e=w(this),n=e.length>>>0;if("[object Function]"!=c(t))throw new TypeError(t+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var i,r=n-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(r in e){i=e[r--];break}if(0>--r)throw new TypeError("reduceRight of empty array with no initial value")}do r in this&&(i=t.call(void 0,i,e[r],r,e));while(r--);return i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=w(this),n=e.length>>>0;if(!n)return-1;var i=0;for(arguments.length>1&&(i=y(arguments[1])),i=i>=0?i:Math.max(0,n+i);n>i;i++)if(i in e&&e[i]===t)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){var e=w(this),n=e.length>>>0;if(!n)return-1;var i=n-1;for(arguments.length>1&&(i=Math.min(i,y(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in e&&t===e[i])return i;return-1}),!Object.keys){var d=!0,h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=h.length;for(var p in{toString:null})d=!1;Object.keys=function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on a non-object");var e=[];for(var n in t)l(t,n)&&e.push(n);if(d)for(var i=0,r=f;r>i;i++){var o=h[i];l(t,o)&&e.push(o)}return e}}Date.prototype.toISOString&&-1!==new Date(-621987552e5).toISOString().indexOf("-000001")||(Date.prototype.toISOString=function(){var t,e,n,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(t=[this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],i=this.getUTCFullYear(),i=(0>i?"-":i>9999?"+":"")+("00000"+Math.abs(i)).slice(i>=0&&9999>=i?-4:-6),e=t.length;e--;)n=t[e],10>n&&(t[e]="0"+n);return i+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}),Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(){if("function"!=typeof this.toISOString)throw new TypeError("toISOString property is not callable");return this.toISOString()}),Date.parse&&864e13===Date.parse("+275760-09-13T00:00:00.000Z")||(Date=function(t){var e=function e(n,i,r,o,s,a,u){var c=arguments.length;if(this instanceof t){var l=1==c&&n+""===n?new t(e.parse(n)):c>=7?new t(n,i,r,o,s,a,u):c>=6?new t(n,i,r,o,s,a):c>=5?new t(n,i,r,o,s):c>=4?new t(n,i,r,o):c>=3?new t(n,i,r):c>=2?new t(n,i):c>=1?new t(n):new t;return l.constructor=e,l}return t.apply(this,arguments)},n=RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");for(var i in t)e[i]=t[i];return e.now=t.now,e.UTC=t.UTC,e.prototype=t.prototype,e.prototype.constructor=e,e.parse=function(e){var i=n.exec(e);if(i){i.shift();for(var r=1;7>r;r++)i[r]=+(i[r]||(3>r?1:0)),1==r&&i[r]--;var o=+i.pop(),s=+i.pop(),a=i.pop(),u=0;if(a){if(s>23||o>59)return 0/0;u=6e4*(60*s+o)*("+"==a?-1:1)}var c=+i[0];return c>=0&&99>=c?(i[0]=c+400,t.UTC.apply(this,i)+u-126227808e5):t.UTC.apply(this,i)+u}return t.parse.apply(this,arguments)},e}(Date));var m="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||m.trim()){m="["+m+"]";var g=RegExp("^"+m+m+"*"),v=RegExp(m+m+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return(this+"").replace(g,"").replace(v,"")}}var y=function(t){return t=+t,t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},b="a"!="a"[0],w=function(t){if(null==t)throw new TypeError("can't convert "+t+" to object");return b&&"string"==typeof t&&t?t.split(""):Object(t)}}),function(t){"function"==typeof define?define("sham",t):"function"==typeof YUI?YUI.add("es5-sham",t):t()}(function(){function t(t){try{return Object.defineProperty(t,"sentinel",{}),"sentinel"in t}catch(e){}}if(Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var e="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,n){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(e+t);if(owns(t,n)){var i={enumerable:!0,configurable:!0};if(supportsAccessors){var r=t.__proto__;t.__proto__=prototypeOfObject;var o=lookupGetter(t,n),s=lookupSetter(t,n);if(t.__proto__=r,o||s)return o&&(i.get=o),s&&(i.set=s),i}return i.value=t[n],i}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),Object.create||(Object.create=function(t,e){var n;if(null===t)n={__proto__:null};else{if("object"!=typeof t)throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,n=new i,n.__proto__=t}return void 0!==e&&Object.defineProperties(n,e),n}),Object.defineProperty){var n=t({}),i="undefined"==typeof document||t(document.createElement("div"));if(!n||!i)var r=Object.defineProperty}if(!Object.defineProperty||r){var o="Property description must be an object: ",s="Object.defineProperty called on non-object: ",a="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,e,n){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError(s+t);if("object"!=typeof n&&"function"!=typeof n||null===n)throw new TypeError(o+n);if(r)try{return r.call(Object,t,e,n)}catch(i){}if(owns(n,"value"))if(supportsAccessors&&(lookupGetter(t,e)||lookupSetter(t,e))){var u=t.__proto__;t.__proto__=prototypeOfObject,delete t[e],t[e]=n.value,t.__proto__=u}else t[e]=n.value;else{if(!supportsAccessors)throw new TypeError(a);owns(n,"get")&&defineGetter(t,e,n.get),owns(n,"set")&&defineSetter(t,e,n.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,e){for(var n in e)owns(e,n)&&"__proto__"!=n&&Object.defineProperty(t,n,e[n]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(u){Object.freeze=function(t){return function(e){return"function"==typeof e?e:t(e)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)!==t)throw new TypeError;for(var e="";owns(t,e);)e+="?";t[e]=!0;var n=owns(t,e);return delete t[e],n})}),define("vendor/flight/lib/utils",[],function(){var t=[],e=100,n={isDomObj:function(t){return!(!t.nodeType&&t!==window)},toArray:function(e,n){return t.slice.call(e,n)},merge:function(){var t=this.toArray(arguments);return t.unshift({}),t[t.length-1]===!0&&(t.pop(),t.unshift(!0)),$.extend.apply(void 0,t)},push:function(t,e,n){return t&&Object.keys(e||{}).forEach(function(i){if(t[i]&&n)throw Error("utils.push attempted to overwrite '"+i+"' while running in protected mode");"object"==typeof t[i]&&"object"==typeof e[i]?this.push(t[i],e[i]):t[i]=e[i]},this),t},isEnumerable:function(t,e){return Object.keys(t).indexOf(e)>-1},compose:function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},uniqueArray:function(t){for(var e={},n=[],i=0,r=t.length;r>i;++i)e.hasOwnProperty(t[i])||(n.push(t[i]),e[t[i]]=1);return n},debounce:function(t,n,i){"number"!=typeof n&&(n=e);var r,o;return function(){var e=this,s=arguments,a=function(){r=null,i||(o=t.apply(e,s))},u=i&&!r;return clearTimeout(r),r=setTimeout(a,n),u&&(o=t.apply(e,s)),o}},throttle:function(t,n){"number"!=typeof n&&(n=e);var i,r,o,s,a,u,c=this.debounce(function(){a=s=!1},n);return function(){i=this,r=arguments;var e=function(){o=null,a&&(u=t.apply(i,r)),c()};return o||(o=setTimeout(e,n)),s?a=!0:(s=!0,u=t.apply(i,r)),c(),u}},countThen:function(t,e){return function(){return--t?void 0:e.apply(this,arguments)}},delegate:function(t){return function(e,n){var i,r=$(e.target);Object.keys(t).forEach(function(o){return(i=r.closest(o)).length?(n=n||{},n.el=i[0],t[o].apply(this,[e,n])):void 0},this)}}};return n}),define("vendor/flight/lib/registry",["./utils"],function(t){function e(e,n){var i,r,o;return n=t.toArray(n),"function"==typeof n[n.length-1]&&(o=n.pop()),"object"==typeof n[n.length-1]&&n.pop(),2==n.length?(i=n[0],r=n[1]):(i=e.node,r=n[0]),{element:i,type:r,callback:o}}function n(t,e){return t.element==e.element&&t.type==e.type&&(null==e.callback||t.callback==e.callback)}function i(){function i(t){this.component=t,this.instances=[],this.addInstance=function(t){this.throwIfInstanceExistsOnNode(t);var e=new r(t);return this.instances.push(e),e},this.throwIfInstanceExistsOnNode=function(t){this.instances.forEach(function(e){if(e.instance.$node[0]===t.$node[0])throw Error("Instance of "+t.constructor+" already exists on node "+t.$node[0])})},this.removeInstance=function(t){var e=this.instances.filter(function(e){return e.instance==t})[0],n=this.instances.indexOf(e);n>-1&&this.instances.splice(n,1),this.instances.length||o.removeComponentInfo(this)}}function r(t){this.instance=t,this.events=[],this.addTrigger=function(){},this.addBind=function(t){this.events.push(t),o.events.push(t)},this.removeBind=function(t){for(var e,i=0;e=this.events[i];i++)n(e,t)&&this.events.splice(i,1)}}var o=this;(this.reset=function(){this.components=[],this.allInstances=[],this.events=[]}).call(this),this.addInstance=function(t){var e=this.findComponentInfo(t);e||(e=new i(t.constructor),this.components.push(e));var n=e.addInstance(t);return this.allInstances.push(n),e},this.removeInstance=function(t){var e,n=this.findInstanceInfo(t),i=this.findComponentInfo(t);i.removeInstance(t);var e=this.allInstances.indexOf(n);e>-1&&this.allInstances.splice(e,1)},this.removeComponentInfo=function(t){var e=this.components.indexOf(t);e>-1&&this.components.splice(e,1)},this.findComponentInfo=function(t){for(var e,n=t.attachTo?t:t.constructor,i=0;e=this.components[i];i++)if(e.component===n)return e;return null},this.findInstanceInfo=function(t){var e;e=t.node?function(e){return e.instance===t}:function(e){return e.instance.node===t};var n=this.allInstances.filter(e);return n.length?t.node?n[0]:n:t.node?null:[]},this.trigger=function(){var t=e(this,arguments),n=o.findInstanceInfo(this);n&&n.addTrigger(t)},this.on=function(n){var i,r=t.toArray(arguments,1),s=o.findInstanceInfo(this);if(s){i=n.apply(null,r),i&&(r[r.length-1]=i);var a=e(this,r);s.addBind(a)}},this.off=function(){var t=e(this,arguments),n=o.findInstanceInfo(this);n&&n.removeBind(t)},this.teardown=function(){o.removeInstance(this)},this.withRegistration=function(){this.before("initialize",function(){o.addInstance(this)}),this.after("trigger",o.trigger),this.around("on",o.on),this.after("off",o.off),this.after("teardown",{obj:o,fnName:"teardown"})}}return new i}),define("vendor/flight/tools/debug/debug",["../../lib/registry","../../lib/utils"],function(){function t(e,n,i){var i=i||{},r=i.obj||window,o=i.path||(r==window?"window":""),s=Object.keys(r);s.forEach(function(i){(f[e]||e)(n,r,i)&&console.log([o,".",i].join(""),"->",["(",typeof r[i],")"].join(""),r[i]),"[object Object]"==Object.prototype.toString.call(r[i])&&r[i]!=r&&-1==o.split(".").indexOf(i)&&t(e,n,{obj:r[i],path:[o,i].join(".")})})}function e(e,n,i,r){n&&typeof i!=n?console.error([i,"must be",n].join(" ")):t(e,i,r)}function n(t,n){e("name","string",t,n)}function i(t,n){e("nameContains","string",t,n)}function r(t,n){e("type","function",t,n)}function o(t,n){e("value",null,t,n)}function s(t,n){e("valueCoerced",null,t,n)}function a(e,n){t(e,null,n)}function u(){var t=[].slice.call(arguments,0);h.eventNames.length||(h.eventNames="all"),h.actions=t.length?t:"all"}function c(){var t=[].slice.call(arguments,0);h.actions.length||(h.actions="all"),h.eventNames=t.length?t:"all"}function l(){h.actions=[],h.eventNames=[]}function d(){h.actions="all",h.eventNames="all"}var h,f={name:function(t,e,n){return t==n},nameContains:function(t,e,n){return n.indexOf(t)>-1},type:function(t,e,n){return e[n]instanceof t},value:function(t,e,n){return e[n]===t},valueCoerced:function(t,e,n){return e[n]==t}},p="all";return h={actions:p,eventNames:p},{enable:function(t){this.enabled=!!t,t&&window.console&&(console.info("Booting in DEBUG mode"),console.info("You can filter event logging with DEBUG.events.logAll/logNone/logByName/logByAction")),window.DEBUG=this},find:{byName:n,byNameContains:i,byType:r,byValue:o,byValueCoerced:s,custom:a},events:{logFilter:h,logByAction:u,logByName:c,logAll:d,logNone:l}}}),define("vendor/flight/lib/compose",["./utils","../tools/debug/debug"],function(t,e){function n(t,e){if(o){var n=Object.create(null);Object.keys(t).forEach(function(i){if(0>s.indexOf(i)){var r=Object.getOwnPropertyDescriptor(t,i);r.writable=e,n[i]=r}}),Object.defineProperties(t,n)}}function i(t,e,n){var i;return o&&t.hasOwnProperty(e)?(i=Object.getOwnPropertyDescriptor(t,e).writable,Object.defineProperty(t,e,{writable:!0}),n.call(t),Object.defineProperty(t,e,{writable:i}),void 0):(n.call(t),void 0)}function r(t,e){t.mixedIn=t.hasOwnProperty("mixedIn")?t.mixedIn:[],e.forEach(function(e){-1==t.mixedIn.indexOf(e)&&(n(t,!1),e.call(t),t.mixedIn.push(e))}),n(t,!0)}var o=e.enabled&&!t.isEnumerable(Object,"getOwnPropertyDescriptor"),s=["mixedIn"];if(o)try{Object.getOwnPropertyDescriptor(Object,"keys")}catch(a){o=!1}return{mixin:r,unlockProperty:i}}),define("vendor/flight/lib/advice",["./utils","./compose"],function(t,e){var n={around:function(e,n){return function(){var i=t.toArray(arguments);return n.apply(this,[e.bind(this)].concat(i))}},before:function(e,n){return this.around(e,function(){var e,i=t.toArray(arguments),r=i.shift();return e="function"==typeof n?n:n.obj[n.fnName],e.apply(this,i),r.apply(this,i)})},after:function(e,n){return this.around(e,function(){var e,i=t.toArray(arguments),r=i.shift(),o=(r.unbound||r).apply(this,i);return e="function"==typeof n?n:n.obj[n.fnName],e.apply(this,i),o})},withAdvice:function(){["before","after","around"].forEach(function(t){this[t]=function(i,r){e.unlockProperty(this,i,function(){return this[i]="function"==typeof this[i]?n[t](this[i],r):r})}},this)}};return n}),define("vendor/flight/lib/logger",["./compose","./utils"],function(t,e){function n(t){var e=t.tagName?t.tagName.toLowerCase():""+t,n=t.className?"."+t.className:"",i=e+n;return t.tagName?["'","'"].join(i):i}function i(t,e,i){var r,s,a,u,c,l,d,h;"function"==typeof i[i.length-1]&&(a=i.pop(),a=a.unbound||a),"object"==typeof i[i.length-1]&&i.pop(),2==i.length?(s=i[0],r=i[1]):(s=e.$node[0],r=i[0]),window.DEBUG&&(c=DEBUG.events.logFilter,d="all"==c.actions||c.actions.indexOf(t)>-1,l=function(t){return t.test?t:RegExp("^"+t.replace(/\*/g,".*")+"$")},h="all"==c.eventNames||c.eventNames.some(function(t){return l(t).test(r)}),d&&h&&console.info(o[t],t,"["+r+"]",n(s),e.constructor.describe,a&&(u=a.name||a.displayName)&&"->  "+u))}function r(){this.before("trigger",function(){i("trigger",this,e.toArray(arguments))}),this.before("on",function(){i("on",this,e.toArray(arguments))}),this.before("off",function(){i("off",this,e.toArray(arguments))})}var o={on:"<-",trigger:"->",off:"x "};return r}),define("director",[],function(){function t(){return""===u.hash||"#"===u.hash}function e(t,e){for(var n=0;t.length>n;n+=1)if(e(t[n],n,t)===!1)return}function n(t){for(var e=[],n=0,i=t.length;i>n;n++)e=e.concat(t[n]);return e}function i(t,e,n){if(!t.length)return n();var i=0;(function r(){e(t[i],function(e){e||e===!1?(n(e),n=function(){}):(i+=1,i===t.length?n():r())})})()}function r(t,e,n){n=t;for(var i in e)if(e.hasOwnProperty(i)&&(n=e[i](t),n!==t))break;return n===t?"([._a-zA-Z0-9-]+)":n}function o(t,e){for(var n,i=0,o="";n=t.substr(i).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)i=n.index+n[0].length,n[0]=n[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),o+=t.substr(0,n.index)+n[0];t=o+=t.substr(i);var s,a=t.match(/:([^\/]+)/gi);if(a){s=a.length;for(var u=0;s>u;u++)t=t.replace(a[u],r(a[u],e))}return t}function a(t,e,n,i){var r,o=0,s=0,a=0,n=""+(n||"("),i=""+(i||")");for(r=0;t.length>r;r++){var u=t[r];if(u.indexOf(n,o)>u.indexOf(i,o)||~u.indexOf(n,o)&&!~u.indexOf(i,o)||!~u.indexOf(n,o)&&~u.indexOf(i,o)){if(s=u.indexOf(n,o),a=u.indexOf(i,o),~s&&!~a||!~s&&~a){var c=t.slice(0,(r||1)+1).join(e);t=[c].concat(t.slice((r||1)+1))}o=(a>s?a:s)+1,r=0}else o=0}return t}Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var n,i=[],r=0,o=this.length;o>r;r++)r in this&&t.call(e,n=this[r],r,this)&&i.push(n);return i}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var u=document.location,c={mode:"modern",hash:u.hash,history:!1,check:function(){var t=u.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,e){function n(t){for(var e=0,n=l.listeners.length;n>e;e++)l.listeners[e](t)}var i=this;if(this.history=e,l.listeners||(l.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=n},500):window.onhashchange=n,this.mode="modern";else{var r=document.createElement("iframe");r.id="state-frame",r.style.display="none",document.body.appendChild(r),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&i.check()}),window.setInterval(function(){i.check()},50),this.onHashChanged=n,this.mode="legacy"}return l.listeners.push(t),this.mode},destroy:function(t){if(l&&l.listeners)for(var e=l.listeners,n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),this.history===!0?(window.history.pushState({},document.title,t),this.fire()):u.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var e=document.getElementById("state-frame"),n=e.contentDocument||e.contentWindow.document;n.open(),n.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),n.close()},syncHash:function(){var t=this._hash;return t!=u.hash&&(u.hash=t),this},onHashChanged:function(){}},l=l=function(t){return this instanceof l?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),this.mount(t||{}),void 0):new l(t)};return l.prototype.init=function(e){var n=this;if(this.handler=function(t){var e=t&&t.newURL||window.location.hash,i=n.history===!0?n.getPath():e.replace(/.*#/,"");n.dispatch("on",i)},c.init(this.handler,this.history),this.history===!1)t()&&e?u.hash=e:t()||n.dispatch("on",u.hash.replace(/^#/,""));else{var i=t()&&e?e:t()?null:u.hash.replace(/^#/,"");i&&window.history.replaceState({},document.title,i),(i||this.run_in_init===!0)&&this.handler()}return this},l.prototype.explode=function(){var t=this.history===!0?this.getPath():u.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},l.prototype.setRoute=function(t,e,n){var i=this.explode();return"number"==typeof t&&"string"==typeof e?i[t]=e:"string"==typeof n?i.splice(t,e,s):i=[t],c.setHash(i.join("/")),i},l.prototype.insertEx=function(t,e,n,i){return"once"===t&&(t="on",n=function(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}(n)),this._insert(t,e,n,i)},l.prototype.getRoute=function(t){var e=t;if("number"==typeof t)e=this.explode()[t];else if("string"==typeof t){var n=this.explode();e=n.indexOf(t)}else e=this.explode();return e},l.prototype.destroy=function(){return c.destroy(this.handler),this},l.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t},l.prototype.configure=function(t){t=t||{};for(var e=0;this.methods.length>e;e++)this._methods[this.methods[e]]=!0;return this.recurse=t.recurse||this.recurse||!1,this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict=t.strict===void 0?!0:t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&t.run_handler_in_init!==!1,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},l.prototype.param=function(t,e){":"!==t[0]&&(t=":"+t);var n=RegExp(t,"g");this.params[t]=function(t){return t.replace(n,e.source||e)}},l.prototype.on=l.prototype.route=function(t,e,n){var i=this;return n||"function"!=typeof e||(n=e,e=t,t="on"),Array.isArray(e)?e.forEach(function(e){i.on(t,e,n)}):(e.source&&(e=e.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(t){i.on(t.toLowerCase(),e,n)}):(e=e.split(RegExp(this.delimiter)),e=a(e,this.delimiter),this.insert(t,this.scope.concat(e),n),void 0))},l.prototype.dispatch=function(t,e,n){function i(){o.last=s.after,o.invoke(o.runlist(s),o,n)}var r,o=this,s=this.traverse(t,e,this.routes,""),a=this._invoked;return this._invoked=!0,s&&0!==s.length?("forward"===this.recurse&&(s=s.reverse()),r=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],r&&r.length>0&&a?(this.async?this.invoke(r,this,i):(this.invoke(r,this),i()),!0):(i(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:e},n),!1)},l.prototype.invoke=function(t,n,r){var o=this;this.async?i(t,function s(e,r){return Array.isArray(e)?i(e,s,r):("function"==typeof e&&e.apply(n,t.captures.concat(r)),void 0)},function(){r&&r.apply(n,arguments)}):e(t,function s(i){return Array.isArray(i)?e(i,s):"function"==typeof i?i.apply(n,t.captures||[]):("string"==typeof i&&o.resource&&o.resource[i].apply(n,t.captures||[]),void 0)})},l.prototype.traverse=function(t,e,n,i,r){function o(t){function e(t){for(var n=[],i=0;t.length>i;i++)n[i]=Array.isArray(t[i])?e(t[i]):t[i];return n}function n(t){for(var e=t.length-1;e>=0;e--)Array.isArray(t[e])?(n(t[e]),0===t[e].length&&t.splice(e,1)):r(t[e])||t.splice(e,1)}if(!r)return t;var i=e(t);return i.matched=t.matched,i.captures=t.captures,i.after=t.after.filter(r),n(i),i}var s,a,u,c,l=[];if(e===this.delimiter&&n[t])return c=[[n.before,n[t]].filter(Boolean)],c.after=[n.after].filter(Boolean),c.matched=!0,c.captures=[],o(c);for(var d in n)if(n.hasOwnProperty(d)&&(!this._methods[d]||this._methods[d]&&"object"==typeof n[d]&&!Array.isArray(n[d]))){if(s=a=i+this.delimiter+d,this.strict||(a+="["+this.delimiter+"]?"),u=e.match(RegExp("^"+a)),!u)continue;if(u[0]&&u[0]==e&&n[d][t])return c=[[n[d].before,n[d][t]].filter(Boolean)],c.after=[n[d].after].filter(Boolean),c.matched=!0,c.captures=u.slice(1),this.recurse&&n===this.routes&&(c.push([n.before,n.on].filter(Boolean)),c.after=c.after.concat([n.after].filter(Boolean))),o(c);if(c=this.traverse(t,e,n[d],s),c.matched)return c.length>0&&(l=l.concat(c)),this.recurse&&(l.push([n[d].before,n[d].on].filter(Boolean)),c.after=c.after.concat([n[d].after].filter(Boolean)),n===this.routes&&(l.push([n.before,n.on].filter(Boolean)),c.after=c.after.concat([n.after].filter(Boolean)))),l.matched=!0,l.captures=c.captures,l.after=c.after,o(l)}return!1},l.prototype.insert=function(t,e,n,i){var r,s,a,u,c;if(e=e.filter(function(t){return t&&t.length>0}),i=i||this.routes,c=e.shift(),/\:|\*/.test(c)&&!/\\d|\\w/.test(c)&&(c=o(c,this.params)),e.length>0)return i[c]=i[c]||{},this.insert(t,e,n,i[c]);if(c||e.length||i!==this.routes){if(s=typeof i[c],a=Array.isArray(i[c]),i[c]&&!a&&"object"==s)switch(r=typeof i[c][t]){case"function":return i[c][t]=[i[c][t],n],void 0;case"object":return i[c][t].push(n),void 0;case"undefined":return i[c][t]=n,void 0}else if("undefined"==s)return u={},u[t]=n,i[c]=u,void 0;throw Error("Invalid route context: "+s)}switch(r=typeof i[t]){case"function":return i[t]=[i[t],n],void 0;case"object":return i[t].push(n),void 0;case"undefined":return i[t]=n,void 0}},l.prototype.extend=function(t){function e(t){i._methods[t]=!0,i[t]=function(){var e=1===arguments.length?[t,""]:[t];i.on.apply(i,e.concat(Array.prototype.slice.call(arguments)))}}var n,i=this,r=t.length;for(n=0;r>n;n++)e(t[n])},l.prototype.runlist=function(t){var e=this.every&&this.every.before?[this.every.before].concat(n(t)):n(t);return this.every&&this.every.on&&e.push(this.every.on),e.captures=t.captures,e.source=t.source,e},l.prototype.mount=function(t,e){function n(e,n){var r=e,o=e.split(i.delimiter),s=typeof t[e],u=""===o[0]||!i._methods[o[0]],c=u?"on":r;return u&&(r=r.slice((r.match(RegExp(i.delimiter))||[""])[0].length),o.shift()),u&&"object"===s&&!Array.isArray(t[e])?(n=n.concat(o),i.mount(t[e],n),void 0):(u&&(n=n.concat(r.split(i.delimiter)),n=a(n,i.delimiter)),i.insert(c,n,t[e]),void 0)}if(t&&"object"==typeof t&&!Array.isArray(t)){var i=this;e=e||[],Array.isArray(e)||(e=e.split(i.delimiter));for(var r in t)t.hasOwnProperty(r)&&n(r,e.slice(0))}},{Router:l}}),function(){"use strict";define("modules/Ingredients/boot",[],function(){var t;return t=function(){return require(["modules/Ingredients/Calculator","modules/Ingredients/Form"],function(t,e){return t.calculatorComponent.attachTo("#calculatorComponent"),e.formComponent.attachTo("#formComponent")})},{initialize:t}})}.call(this),function(){"use strict";define("modules/sidebar/boot",[],function(){var t,e;return t=function(){return require(["jquery","mustache","templates","modules/sidebar/nav"],function(t,e,n,i){return t("#sidebar").html(e.render(n.sidebarTemplate,{})),i.navbarComponent.attachTo("#navbar")})},e=function(t){return require(["jquery","mustache","templates","modules/sidebar/nav"],function(e){return e("li.active").each(function(){return e(this).removeClass("active")}),e(t).addClass("active")})},{initialize:t,toggleNavbar:e}})}.call(this),define("vendor/flight/lib/component",["./advice","./utils","./compose","./registry"],function(t,e,n,i){function r(t){t.events.slice().forEach(function(t){var e=[t.type];t.element&&e.unshift(t.element),"function"==typeof t.callback&&e.push(t.callback),this.off.apply(this,e)},t.instance)}function o(){this.trigger("componentTearDown"),r(i.findInstanceInfo(this))}function s(){var t=i.findComponentInfo(this);t&&t.instances.slice().forEach(function(t){t.instance.teardown()})}function a(t,e){try{window.postMessage(e,"*")}catch(n){throw console.log("unserializable data for event",t,":",e),Error(["The event",t,"on component",this.describe,"was triggered with non-serializable data"].join(" "))}}function u(){this.trigger=function(){var t,n,i,r,o,s=e.toArray(arguments),u=s[s.length-1];"string"==typeof u||u&&u.defaultBehavior||(i=s.pop()),t=2==s.length?$(s.shift()):this.$node,r=s[0],r.defaultBehavior&&(o=r.defaultBehavior,r=$.Event(r.type)),n=r.type||r,window.DEBUG&&window.postMessage&&a.call(this,n,i),"object"==typeof this.attr.eventData&&(i=$.extend(!0,{},this.attr.eventData,i));var c=t.trigger(r||n,i);return o&&!r.isDefaultPrevented()&&(this[o]||o).call(this),c},this.on=function(){var t,n,i,r,o=e.toArray(arguments);if(r="object"==typeof o[o.length-1]?e.delegate(this.resolveDelegateRules(o.pop())):o.pop(),t=2==o.length?$(o.shift()):this.$node,n=o[0],"function"!=typeof r&&"object"!=typeof r)throw Error("Unable to bind to '"+n+"' because the given callback is not a function or an object");return i=r.bind(this),i.target=r,r.guid&&(i.guid=r.guid),t.on(n,i),r.guid=i.guid,i},this.off=function(){var t,n,i,r=e.toArray(arguments);return"function"==typeof r[r.length-1]&&(i=r.pop()),t=2==r.length?$(r.shift()):this.$node,n=r[0],t.off(n,i)},this.resolveDelegateRules=function(t){var e={};return Object.keys(t).forEach(function(n){if(!this.attr.hasOwnProperty(n))throw Error('Component "'+this.describe+'" wants to listen on "'+n+'" but no such attribute was defined.');e[this.attr[n]]=t[n]},this),e},this.defaultAttrs=function(t){e.push(this.defaults,t,!0)||(this.defaults=t)},this.select=function(t){return this.$node.find(this.attr[t])},this.initialize=$.noop,this.teardown=o}function c(t){if(!t)throw Error("Component needs to be attachTo'd a jQuery object, native node or selector string");var n=e.merge.apply(e,e.toArray(arguments,1));$(t).each(function(t,e){new this(e,n)}.bind(this))}function l(){function r(t,n){var i={},r=0;if(!t)throw Error("Component needs a node");t.jquery?(this.node=t[0],this.$node=t):(this.node=t,this.$node=$(t)),this.describe=this.constructor.describe,this.bind=function(t){var n;if(t.uuid&&(n=i[t.uuid]))return n;var o=e.toArray(arguments,1);return o.unshift(this),n=t.bind.apply(t,o),n.target=t,t.uuid=r++,i[t.uuid]=n,n},this.attr=e.merge(this.defaults,n),this.defaults&&Object.keys(this.defaults).forEach(function(t){if(null===this.defaults[t]&&null===this.attr[t])throw Error('Required attribute "'+t+'" not specified in attachTo for component "'+this.describe+'".')},this),this.initialize.call(this,n||{}),this.trigger("componentInitialized")}var o=e.toArray(arguments);return r.toString=function(){var t=o.map(function(t){if($.browser.msie){var e=(""+t).match(d);return e&&e[1]?e[1]:""}return t.name}).join(", ").replace(h,"");return t},r.describe=""+r,r.attachTo=c,r.teardownAll=s,o.unshift(u,t.withAdvice,i.withRegistration),n.mixin(r.prototype,o),r}var d=/function (.*?)\s?\(/,h=/\s\,/g;return l.teardownAll=function(){i.components.slice().forEach(function(t){t.component.teardownAll()
}),i.reset()},l}),function(){"use strict";define("templates",{IngredientsTemplate:'<div class="row-fluid" id="calculatorComponent"> <h4>Ingredients calculator</h4> <div class="row-fluid"> <div class="row-fluid itemTopRow"> <div class="span7 itemName">Item Name</div> <div class="span1 itemName">Price</div> <div class="span1 itemName">Quantity</div> <div class="span1 itemName">Unit</div> <div class="span2 itemValue">Total price</div> </div> </div> <div class="row-fluid" id="itemList"></div> <div class="row-fluid"> <div class="row-fluid itemBottomRow"> <div class="span9 itemName">Total</div> <div class="span1 offset1 itemValue" id="totalPriceValue">0.00</div> </div> </div> <form> <fieldset> <h4>Add a new Ingredient</h4> <label>Ingredient Name</label> <div class="control-group" id="warningGroup"> <div class="controls" id="inputControls"></div> </div> </fieldset> </form> </div> <div class="row-fluid" id="formComponent"> <a class="btn btn-success" id="addNewIngredientButton"> <i class="icon-plus-sign icon-white"></i></a>&nbsp;&nbsp;Can"t find an item in your list? Why not add another? <div class="modal hide fade" id="addNewIngredientFormModal"> <div class="modal-header"> <button id="addIngredientModalClose" type="button" class="close" data-dismiss="modal" aria-hidden="true" data-loading-text="&times;">&times;</button> <h3>Add a new Ingredient</h3> </div> <div class="modal-body"> <form id="addIngredientmodalForm"> <fieldset> <div class="row-fluid"> <div class="row-fluid" id="formAlertArea"> </div> <label>Item Name</label> <input name="NAME" class="input-block-level" placeholder="Item Name" type="text"> <label>Brand</label> <input name="BRAND" class="input-block-level" placeholder="Brand" type="text"> <label>Unit</label> <input name="UNIT" class="input-block-level" placeholder="Unit" type="text"> <label>Unit Cost</label> <input name="PRICE" class="input-block-level" placeholder="Unit Cost" type="number"> <input id="formTimeStamp" type="hidden" name="LASTTIMESTAMP" value=0> </div> </fieldset> </form> </div> <div class="modal-footer"> <button id="addIngredientFormSubmit" type="button" class="btn btn-primary" data-loading-text="Adding...">Add</button> </div> </div>',sidebarTemplate:'<div class="row-fluid"> <div class="span12" id="navbar"> <ul class="nav nav-tabs nav-stacked" id="navbarUl"> <li class="active" id="nav1"> <a href="#/home"><i class="icon-home icon-black"></i>&nbsp;&nbsp;Home</a> </li> <li id="nav2"> <a href="#/about"><i class="icon-question-sign icon-black"></i>&nbsp;&nbsp;About Us</a> </li> <li id="nav3"> <a href="#/ingredients"><i class="icon-list-alt icon-black"></i>&nbsp;&nbsp;Ingredients</a> </li> </ul> </div> </div>'})}.call(this),function(){"use strict";define("router",["director","modules/Ingredients/boot","modules/sidebar/boot","jquery","mustache","vendor/flight/lib/component","templates"],function(t,e,n,i,r,o,s){var a;return a=function(){var a,u,c,l,d;return c=function(){return o.teardownAll(),i("#content").html(r.render(s.IngredientsTemplate)),e.initialize(),n.toggleNavbar("#nav3")},u=function(){return o.teardownAll(),i("#content").empty(),n.toggleNavbar("#nav1")},a=function(){return o.teardownAll(),n.toggleNavbar("#nav2"),i("#content").empty()},d={"/ingredients":c,"/about":a,"/home":u},l=t.Router(d),l.init()},{initialize:a}})}.call(this),function(){"use strict";define("app",["jquery","router","modules/sidebar/boot"],function(t,e,n){var i;return i=function(){return n.initialize(),e.initialize()},{initialize:i}})}.call(this),function(){require.config({paths:{jquery:"vendor/jquery/jquery",underscore:"vendor/underscore/underscore",director:"vendor/director/director_AMD",shim:"vendor/es5-shim/es5-shim",sham:"vendor/es5-shim/es5-sham",router:"router",mustache:"vendor/mustache/mustache"}}),require(["jquery","shim","sham","vendor/flight/lib/compose","vendor/flight/lib/registry","vendor/flight/lib/advice","vendor/flight/lib/logger","app"],function(t,e,n,i,r,o,s,a){"use strict";return i.mixin(r,[o.withAdvice,s]),a.initialize(),console.log("Running jQuery %s",t().jquery)})}.call(this),define("main",function(){})})();